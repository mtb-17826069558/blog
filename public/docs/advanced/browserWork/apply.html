<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>浏览器渲染原理 |  </title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/favicon.ico">
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    
    <link rel="preload" href="/assets/css/0.styles.a5aa8a4f.css" as="style"><link rel="preload" href="/assets/js/app.50b0bd0e.js" as="script"><link rel="preload" href="/assets/js/6.e87d9ed0.js" as="script"><link rel="preload" href="/assets/js/1.ec164ee9.js" as="script"><link rel="preload" href="/assets/js/19.f3670cbe.js" as="script"><link rel="prefetch" href="/assets/js/10.f31dcad4.js"><link rel="prefetch" href="/assets/js/100.b65dbfb7.js"><link rel="prefetch" href="/assets/js/101.2f7804d4.js"><link rel="prefetch" href="/assets/js/102.19721495.js"><link rel="prefetch" href="/assets/js/103.3907d09f.js"><link rel="prefetch" href="/assets/js/104.6dc0d50d.js"><link rel="prefetch" href="/assets/js/105.8fc03431.js"><link rel="prefetch" href="/assets/js/106.2b3e80bb.js"><link rel="prefetch" href="/assets/js/107.00eeb0c1.js"><link rel="prefetch" href="/assets/js/108.6684f665.js"><link rel="prefetch" href="/assets/js/109.31599187.js"><link rel="prefetch" href="/assets/js/11.b3d0a7d3.js"><link rel="prefetch" href="/assets/js/110.110aebcc.js"><link rel="prefetch" href="/assets/js/111.41b6043b.js"><link rel="prefetch" href="/assets/js/112.efbffe48.js"><link rel="prefetch" href="/assets/js/113.ecb80c23.js"><link rel="prefetch" href="/assets/js/114.687d4b44.js"><link rel="prefetch" href="/assets/js/115.e370fa4f.js"><link rel="prefetch" href="/assets/js/116.323e724e.js"><link rel="prefetch" href="/assets/js/117.0ad5ef95.js"><link rel="prefetch" href="/assets/js/118.943466be.js"><link rel="prefetch" href="/assets/js/119.cffe859f.js"><link rel="prefetch" href="/assets/js/12.8ef5f3e8.js"><link rel="prefetch" href="/assets/js/120.d7e16a57.js"><link rel="prefetch" href="/assets/js/121.f551d960.js"><link rel="prefetch" href="/assets/js/122.2d19b98d.js"><link rel="prefetch" href="/assets/js/123.1c21f20a.js"><link rel="prefetch" href="/assets/js/124.b6b80c3a.js"><link rel="prefetch" href="/assets/js/125.59e4c603.js"><link rel="prefetch" href="/assets/js/126.a8118a06.js"><link rel="prefetch" href="/assets/js/127.e3a59b59.js"><link rel="prefetch" href="/assets/js/128.b7a37475.js"><link rel="prefetch" href="/assets/js/129.f0a3bd3b.js"><link rel="prefetch" href="/assets/js/13.6a90eae7.js"><link rel="prefetch" href="/assets/js/130.421ae976.js"><link rel="prefetch" href="/assets/js/131.f4c0fb70.js"><link rel="prefetch" href="/assets/js/132.525fac8e.js"><link rel="prefetch" href="/assets/js/133.5ae9ce44.js"><link rel="prefetch" href="/assets/js/134.95c2addc.js"><link rel="prefetch" href="/assets/js/135.dcacde31.js"><link rel="prefetch" href="/assets/js/136.d667ea7a.js"><link rel="prefetch" href="/assets/js/137.19b2ce8c.js"><link rel="prefetch" href="/assets/js/138.390429cb.js"><link rel="prefetch" href="/assets/js/139.c70b8ece.js"><link rel="prefetch" href="/assets/js/14.38618b9e.js"><link rel="prefetch" href="/assets/js/140.e5036082.js"><link rel="prefetch" href="/assets/js/141.7bfa2b08.js"><link rel="prefetch" href="/assets/js/142.e77dd390.js"><link rel="prefetch" href="/assets/js/143.8eb9154d.js"><link rel="prefetch" href="/assets/js/144.9767ec98.js"><link rel="prefetch" href="/assets/js/145.9e9c6701.js"><link rel="prefetch" href="/assets/js/146.ca4d12d0.js"><link rel="prefetch" href="/assets/js/147.da4e4bae.js"><link rel="prefetch" href="/assets/js/148.a21442de.js"><link rel="prefetch" href="/assets/js/149.bc249c71.js"><link rel="prefetch" href="/assets/js/15.8d4afe36.js"><link rel="prefetch" href="/assets/js/150.88c28b26.js"><link rel="prefetch" href="/assets/js/151.f46342e7.js"><link rel="prefetch" href="/assets/js/152.7b34cc5a.js"><link rel="prefetch" href="/assets/js/153.8c2f5dff.js"><link rel="prefetch" href="/assets/js/154.cb99ba1d.js"><link rel="prefetch" href="/assets/js/155.7f280a85.js"><link rel="prefetch" href="/assets/js/156.a86bb026.js"><link rel="prefetch" href="/assets/js/157.4391bcec.js"><link rel="prefetch" href="/assets/js/158.87a031d9.js"><link rel="prefetch" href="/assets/js/159.c23f4f61.js"><link rel="prefetch" href="/assets/js/16.d0096911.js"><link rel="prefetch" href="/assets/js/160.1b0ed9ef.js"><link rel="prefetch" href="/assets/js/161.21fb4a61.js"><link rel="prefetch" href="/assets/js/162.cc0391bb.js"><link rel="prefetch" href="/assets/js/163.d086c8b9.js"><link rel="prefetch" href="/assets/js/164.ec1fada9.js"><link rel="prefetch" href="/assets/js/165.0d293c44.js"><link rel="prefetch" href="/assets/js/166.8d66cec9.js"><link rel="prefetch" href="/assets/js/167.09c4b555.js"><link rel="prefetch" href="/assets/js/168.848e9a5a.js"><link rel="prefetch" href="/assets/js/169.a1a11dcf.js"><link rel="prefetch" href="/assets/js/17.87f12011.js"><link rel="prefetch" href="/assets/js/170.339f38b1.js"><link rel="prefetch" href="/assets/js/171.c92805e4.js"><link rel="prefetch" href="/assets/js/172.1e00ee49.js"><link rel="prefetch" href="/assets/js/173.bfcc3ae9.js"><link rel="prefetch" href="/assets/js/174.14665670.js"><link rel="prefetch" href="/assets/js/175.20f36a90.js"><link rel="prefetch" href="/assets/js/176.6081bc4d.js"><link rel="prefetch" href="/assets/js/177.9ef42251.js"><link rel="prefetch" href="/assets/js/178.9ed7eb1c.js"><link rel="prefetch" href="/assets/js/179.dfe3224a.js"><link rel="prefetch" href="/assets/js/18.08d0ada2.js"><link rel="prefetch" href="/assets/js/180.ca1b88dd.js"><link rel="prefetch" href="/assets/js/181.85fd587e.js"><link rel="prefetch" href="/assets/js/182.7dec60e9.js"><link rel="prefetch" href="/assets/js/183.ae99194d.js"><link rel="prefetch" href="/assets/js/184.a14fa938.js"><link rel="prefetch" href="/assets/js/185.5f4317e4.js"><link rel="prefetch" href="/assets/js/186.e4c20829.js"><link rel="prefetch" href="/assets/js/187.ad7aba45.js"><link rel="prefetch" href="/assets/js/188.51585f42.js"><link rel="prefetch" href="/assets/js/189.eef9c3af.js"><link rel="prefetch" href="/assets/js/190.55ec796f.js"><link rel="prefetch" href="/assets/js/191.8af62975.js"><link rel="prefetch" href="/assets/js/192.f510c242.js"><link rel="prefetch" href="/assets/js/193.27739c1f.js"><link rel="prefetch" href="/assets/js/194.27ce2340.js"><link rel="prefetch" href="/assets/js/195.84027b6d.js"><link rel="prefetch" href="/assets/js/196.df11c94c.js"><link rel="prefetch" href="/assets/js/197.f23f9af1.js"><link rel="prefetch" href="/assets/js/198.884fdd82.js"><link rel="prefetch" href="/assets/js/199.8be019b7.js"><link rel="prefetch" href="/assets/js/20.8e38aad3.js"><link rel="prefetch" href="/assets/js/200.a0f74bb9.js"><link rel="prefetch" href="/assets/js/201.b8cab5b2.js"><link rel="prefetch" href="/assets/js/202.593bcdf1.js"><link rel="prefetch" href="/assets/js/203.38ada156.js"><link rel="prefetch" href="/assets/js/204.5e8e0d74.js"><link rel="prefetch" href="/assets/js/205.2f37d4c7.js"><link rel="prefetch" href="/assets/js/206.1e95b0c1.js"><link rel="prefetch" href="/assets/js/207.7b33e430.js"><link rel="prefetch" href="/assets/js/208.586fb54f.js"><link rel="prefetch" href="/assets/js/209.0f76a189.js"><link rel="prefetch" href="/assets/js/21.7c0af6e5.js"><link rel="prefetch" href="/assets/js/210.a03e7aa4.js"><link rel="prefetch" href="/assets/js/22.a43e198e.js"><link rel="prefetch" href="/assets/js/23.edc63186.js"><link rel="prefetch" href="/assets/js/24.6acb4524.js"><link rel="prefetch" href="/assets/js/25.54b2d8c1.js"><link rel="prefetch" href="/assets/js/26.a6a7d99e.js"><link rel="prefetch" href="/assets/js/27.d562aaf3.js"><link rel="prefetch" href="/assets/js/28.bd34de62.js"><link rel="prefetch" href="/assets/js/29.7e560460.js"><link rel="prefetch" href="/assets/js/3.cbfd3302.js"><link rel="prefetch" href="/assets/js/30.9e4eb3a0.js"><link rel="prefetch" href="/assets/js/31.dc5c15a7.js"><link rel="prefetch" href="/assets/js/32.ea74517c.js"><link rel="prefetch" href="/assets/js/33.1e12504d.js"><link rel="prefetch" href="/assets/js/34.899cdc10.js"><link rel="prefetch" href="/assets/js/35.a417ea04.js"><link rel="prefetch" href="/assets/js/36.9be6f5b5.js"><link rel="prefetch" href="/assets/js/37.a92c1c1a.js"><link rel="prefetch" href="/assets/js/38.f08a12ba.js"><link rel="prefetch" href="/assets/js/39.aeba8fcb.js"><link rel="prefetch" href="/assets/js/4.221b21e6.js"><link rel="prefetch" href="/assets/js/40.59634b4d.js"><link rel="prefetch" href="/assets/js/41.bbe49b53.js"><link rel="prefetch" href="/assets/js/42.ba2e0d89.js"><link rel="prefetch" href="/assets/js/43.f1c4dea3.js"><link rel="prefetch" href="/assets/js/44.c67cec05.js"><link rel="prefetch" href="/assets/js/45.adb75bb8.js"><link rel="prefetch" href="/assets/js/46.95713282.js"><link rel="prefetch" href="/assets/js/47.9cd0cbcb.js"><link rel="prefetch" href="/assets/js/48.5d1125de.js"><link rel="prefetch" href="/assets/js/49.bd152b52.js"><link rel="prefetch" href="/assets/js/5.94a481b2.js"><link rel="prefetch" href="/assets/js/50.bd44ae39.js"><link rel="prefetch" href="/assets/js/51.b845484b.js"><link rel="prefetch" href="/assets/js/52.9f5e1b33.js"><link rel="prefetch" href="/assets/js/53.b82c5ca1.js"><link rel="prefetch" href="/assets/js/54.13dbf8b8.js"><link rel="prefetch" href="/assets/js/55.5951115e.js"><link rel="prefetch" href="/assets/js/56.21e28602.js"><link rel="prefetch" href="/assets/js/57.6d17fbd1.js"><link rel="prefetch" href="/assets/js/58.1f664d30.js"><link rel="prefetch" href="/assets/js/59.baa7e5ae.js"><link rel="prefetch" href="/assets/js/60.9b3f768f.js"><link rel="prefetch" href="/assets/js/61.ca432034.js"><link rel="prefetch" href="/assets/js/62.fcd5505e.js"><link rel="prefetch" href="/assets/js/63.e3e719f4.js"><link rel="prefetch" href="/assets/js/64.90f57282.js"><link rel="prefetch" href="/assets/js/65.4b3403d2.js"><link rel="prefetch" href="/assets/js/66.cec94f4b.js"><link rel="prefetch" href="/assets/js/67.979fb1ae.js"><link rel="prefetch" href="/assets/js/68.4655356e.js"><link rel="prefetch" href="/assets/js/69.ebac3cde.js"><link rel="prefetch" href="/assets/js/7.967c5e84.js"><link rel="prefetch" href="/assets/js/70.292403ea.js"><link rel="prefetch" href="/assets/js/71.cf3e7135.js"><link rel="prefetch" href="/assets/js/72.7b9c4dd4.js"><link rel="prefetch" href="/assets/js/73.8b0d3568.js"><link rel="prefetch" href="/assets/js/74.2a2a861a.js"><link rel="prefetch" href="/assets/js/75.25094287.js"><link rel="prefetch" href="/assets/js/76.baac8a99.js"><link rel="prefetch" href="/assets/js/77.3b641027.js"><link rel="prefetch" href="/assets/js/78.a01fd402.js"><link rel="prefetch" href="/assets/js/79.c86cd94e.js"><link rel="prefetch" href="/assets/js/8.80ca7005.js"><link rel="prefetch" href="/assets/js/80.f41c03e8.js"><link rel="prefetch" href="/assets/js/81.fa9db5b5.js"><link rel="prefetch" href="/assets/js/82.d878db34.js"><link rel="prefetch" href="/assets/js/83.2355ce47.js"><link rel="prefetch" href="/assets/js/84.b01be280.js"><link rel="prefetch" href="/assets/js/85.15df55fa.js"><link rel="prefetch" href="/assets/js/86.d1dd2952.js"><link rel="prefetch" href="/assets/js/87.1c5e3ca6.js"><link rel="prefetch" href="/assets/js/88.ad05de6d.js"><link rel="prefetch" href="/assets/js/89.60ab9921.js"><link rel="prefetch" href="/assets/js/9.15a9f0c5.js"><link rel="prefetch" href="/assets/js/90.0436c4c7.js"><link rel="prefetch" href="/assets/js/91.575612f5.js"><link rel="prefetch" href="/assets/js/92.9a654a18.js"><link rel="prefetch" href="/assets/js/93.e442b473.js"><link rel="prefetch" href="/assets/js/94.808f7829.js"><link rel="prefetch" href="/assets/js/95.e9a6e5a2.js"><link rel="prefetch" href="/assets/js/96.c46e7d83.js"><link rel="prefetch" href="/assets/js/97.39d336e3.js"><link rel="prefetch" href="/assets/js/98.168f8272.js"><link rel="prefetch" href="/assets/js/99.f2314237.js">
    <link rel="stylesheet" href="/assets/css/0.styles.a5aa8a4f.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container" data-v-1156296a><div data-v-1156296a><div id="loader-wrapper" class="loading-wrapper" data-v-d48f4d20 data-v-1156296a data-v-1156296a><div class="loader-main" data-v-d48f4d20><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div></div> <!----> <!----></div> <div class="password-shadow password-wrapper-out" style="display:none;" data-v-4e82dffc data-v-1156296a data-v-1156296a><h3 class="title" data-v-4e82dffc data-v-4e82dffc> </h3> <p class="description" data-v-4e82dffc data-v-4e82dffc></p> <label id="box" class="inputBox" data-v-4e82dffc data-v-4e82dffc><input type="password" value="" data-v-4e82dffc> <span data-v-4e82dffc>Konck! Knock!</span> <button data-v-4e82dffc>OK</button></label> <div class="footer" data-v-4e82dffc data-v-4e82dffc><span data-v-4e82dffc><i class="iconfont reco-theme" data-v-4e82dffc></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-4e82dffc>vuePress-theme-reco</a></span> <span data-v-4e82dffc><i class="iconfont reco-copyright" data-v-4e82dffc></i> <a data-v-4e82dffc><!---->
            
          <span data-v-4e82dffc>2017 - </span>
          2021
        </a></span></div></div> <div class="hide" data-v-1156296a><header class="navbar" data-v-1156296a><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/logo.png" alt=" " class="logo"> <span class="site-name"> </span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      前端
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/accumulate/javascript/basicsGrammar.html" class="nav-link"><i class="undefined"></i>
  前端基础
</a></li><li class="dropdown-item"><!----> <a href="/docs/advanced/guide/scss.html" class="nav-link"><i class="undefined"></i>
  前端进阶
</a></li></ul></div></div><div class="nav-item"><a href="/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  时间轴
</a></div><div class="nav-item"><a href="/docs/koa/koarapid/rapid.html" class="nav-link"><i class="iconfont reco-date"></i>
  Koa
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-account"></i>
      我的
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-1156296a></div> <aside class="sidebar" data-v-1156296a><div class="personal-info-wrapper" data-v-828910c6 data-v-1156296a><img src="/avatar.png" alt="author-avatar" class="personal-img" data-v-828910c6> <!----> <div class="num" data-v-828910c6><div data-v-828910c6><h3 data-v-828910c6>156</h3> <h6 data-v-828910c6>Articles</h6></div> <div data-v-828910c6><h3 data-v-828910c6>6</h3> <h6 data-v-828910c6>Tags</h6></div></div> <ul class="social-links" data-v-828910c6></ul> <hr data-v-828910c6></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      前端
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/accumulate/javascript/basicsGrammar.html" class="nav-link"><i class="undefined"></i>
  前端基础
</a></li><li class="dropdown-item"><!----> <a href="/docs/advanced/guide/scss.html" class="nav-link"><i class="undefined"></i>
  前端进阶
</a></li></ul></div></div><div class="nav-item"><a href="/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  时间轴
</a></div><div class="nav-item"><a href="/docs/koa/koarapid/rapid.html" class="nav-link"><i class="iconfont reco-date"></i>
  Koa
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-account"></i>
      我的
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav> <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>HTML+CSS</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>JavaScript</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Vue</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>React</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>TypeScript</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Node.js</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>前端业务</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>前端工程化</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>前端可视化</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>计算机网络</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>前端设计模式</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>浏览器工作原理</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/advanced/browserWork/safe.html" class="sidebar-link">前端安全</a></li><li><a href="/docs/advanced/browserWork/course.html" class="sidebar-link">进程与线程</a></li><li><a href="/docs/advanced/browserWork/mechanism.html" class="sidebar-link">浏览器事件机制</a></li><li><a href="/docs/advanced/browserWork/crossDomain.html" class="sidebar-link">同源策略与跨域</a></li><li><a href="/docs/advanced/browserWork/apply.html" aria-current="page" class="active sidebar-link">浏览器渲染原理</a></li><li><a href="/docs/advanced/browserWork/rubbish.html" class="sidebar-link">浏览器垃圾回收机制</a></li><li><a href="/docs/advanced/browserWork/devTools.html" class="sidebar-link">Chrome DevTools调试指南</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>前端性能优化</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-4e82dffc data-v-1156296a><h3 class="title" data-v-4e82dffc data-v-4e82dffc></h3> <!----> <label id="box" class="inputBox" data-v-4e82dffc data-v-4e82dffc><input type="password" value="" data-v-4e82dffc> <span data-v-4e82dffc>Konck! Knock!</span> <button data-v-4e82dffc>OK</button></label> <div class="footer" data-v-4e82dffc data-v-4e82dffc><span data-v-4e82dffc><i class="iconfont reco-theme" data-v-4e82dffc></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-4e82dffc>vuePress-theme-reco</a></span> <span data-v-4e82dffc><i class="iconfont reco-copyright" data-v-4e82dffc></i> <a data-v-4e82dffc><!---->
            
          <span data-v-4e82dffc>2017 - </span>
          2021
        </a></span></div></div> <div data-v-1156296a><main class="page" style="padding-right:0;"><section><div class="page-title"><h1 class="title">浏览器渲染原理</h1> <div data-v-1ff7123e><!----> <!----> <!----> <!----></div></div> <div class="theme-reco-content content__default"><h1 id="浏览器渲染原理"><a href="#浏览器渲染原理" class="header-anchor">#</a> 浏览器渲染原理</h1> <h2 id="_1-浏览器渲染基本步骤"><a href="#_1-浏览器渲染基本步骤" class="header-anchor">#</a> 1. 浏览器渲染基本步骤</h2> <p>浏览器主要有以下步骤：</p> <ul><li><p>浏览器通过HTTP协议向服务端请求页面数据</p></li> <li><p>将请求回来的HTML文件解析成DOM树</p></li> <li><p>将请求回来的CSS文件解析成CSSOM树</p></li> <li><p>将DOM树和CSSOM树结合在一起，生成渲染树（render tree）</p></li> <li><p>计算渲染树的布局，这实际上是回流的过程</p></li> <li><p>将布局渲染到屏幕上，这实际上是重绘的过程</p></li></ul> <p>大致过程如图所示：</p> <p><img src="/assets/img/1603797939165-3bf54e28-5469-4093-a0e1-e0569cec1305.37fd817e.png" alt="img"></p> <p>这里主要说说后面解析的过程。</p> <h2 id="_2-构建dom树、cssom树"><a href="#_2-构建dom树、cssom树" class="header-anchor">#</a> 2. 构建DOM树、CSSOM树</h2> <h3 id="_1-构建dom树"><a href="#_1-构建dom树" class="header-anchor">#</a> （1）构建DOM树</h3> <p>当打开一个网页时，浏览器都会去请求对应的 HTML 文件。虽然平时我们写代码时都会分为 JS、CSS、HTML 文件，也就是字符串，但是计算机硬件是不理解这些字符串的，所以在网络中传输的内容其实都是 0 和 1 这些字节数据。当浏览器接收到这些字节数据以后，它会将这些字节数据转换为字符串，也就是我们写的代码。</p> <p><img src="data:image/png;base64,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" alt="img"></p> <p>当数据转换为字符串以后，浏览器会先将这些字符串通过词法分析转换为标记（token），这一过程在词法分析中叫做标记化（tokenization）。</p> <p><img src="data:image/png;base64,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" alt="img"></p> <p>简单来说，标记还是字符串，是构成代码的最小单位。这一过程会将代码分拆成一块块，并给这些内容打上标记，便于理解这些最小单位的代码是什么意思。</p> <p><img src="/assets/img/1615512625117-3fba1123-abda-4455-95df-32aed4e50886.58b8ebbd.png" alt="img"></p> <p>当结束标记化后，这些标记会紧接着转换为 Node，最后这些 Node 会根据不同 Node 之前的联系构建为一颗 DOM 树。</p> <p><img src="/assets/img/1615512645071-f13d89b2-7735-4c66-8f5b-827b72e88d37.90bb46ea.png" alt="img"></p> <p>以上就是浏览器从网络中接收到 HTML 文件然后一系列的转换过程。</p> <p><img src="/assets/img/1615512686008-1f265ff9-4e71-461f-a285-8ceb6fcdb918.41a180b5.png" alt="img"></p> <p>当然，在解析 HTML 文件的时候，浏览器还会遇到 CSS 和 JS 文件，这时候浏览器也会去下载并解析这些文件，接下来就看看浏览器如何解析 CSS 文件。</p> <p>**注意：**在解析过程中，如果遇到 <code>&lt;script&gt;</code>就会停止页面的解析，先执行标签中的JavaScript代码，如果代码时外联的形式，也需要等待外联的JavaScript代码下载并执行完才继续执行解析HTML的工作，解析完HTML文件之后，就会触发<code>DOMContentLoaded</code> 事件，这时就可以操作DOM了。</p> <h3 id="_2-构建cssom树"><a href="#_2-构建cssom树" class="header-anchor">#</a> （2）构建CSSOM树</h3> <p>其实转换 CSS 到 CSSOM 树的过程和DOM树的渲染过程是极其类似的：</p> <p><img src="/assets/img/1615512797573-080930d1-db3c-4248-845e-04f8d583861d.2b8cb32f.png" alt="img"></p> <p>在这一过程中，浏览器会确定下每一个节点的样式到底是什么，并且这一过程其实是很消耗资源的。因为样式你可以自行设置给某个节点，也可以通过继承获得。在这一过程中，浏览器得递归 CSSOM 树，然后确定具体的元素到底是什么样式。</p> <p>那为什么会消耗资源呢？来看个例子</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>a<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>span<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span> <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>style<span class="token operator">&gt;</span>
  span <span class="token punctuation">{</span>
    color<span class="token operator">:</span> red<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  div <span class="token operator">&gt;</span> a <span class="token operator">&gt;</span> span <span class="token punctuation">{</span>
    color<span class="token operator">:</span> red<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>对于第一种设置样式的方式来说，浏览器只需要找到页面中所有的 span 标签然后设置颜色，但是对于第二种设置样式的方式来说，浏览器首先需要找到所有的 span 标签，然后找到 span 标签上的 a 标签，最后再去找到 div 标签，然后给符合这种条件的 span 标签设置颜色，这样的递归过程就很复杂。所以我们应该尽可能的避免写过于具体的 CSS 选择器，然后对于 HTML 来说也尽量少的添加无意义标签，保证层级扁平。</p> <p>CSS解析为CSSStyleSheet（也就是CSSOM树）的过程如下：</p> <p><img src="/assets/img/1603797939150-7bab1384-2843-4ee8-b116-0a24047e5a50.c712e922.png" alt="img"></p> <p>CSS是一种<strong>渲染阻塞资源</strong>(render blocking resource)，它需要完全被解析完毕之后才能进入生成渲染树的环节。</p> <p>由于CSS有些属性具有继承性，后面定义的样式可能会覆盖或修改前面的样式，所以只有当所有的CSS代码都执行渲染完之后才能进入下一个环节。在CSSOM构建完成之前，页面都会处于白屏状态，所以，一般都是在文件的头部引入CSS文件。</p> <h2 id="_3-构建渲染树"><a href="#_3-构建渲染树" class="header-anchor">#</a> 3. 构建渲染树</h2> <p>DOM 树包含的结构内容与 CSSOM 树包含的样式规则都是独立的，为了更方便渲染，先需要将它们合并成一棵渲染树。</p> <p>这个过程会从 DOM 树的根节点开始遍历，然后在 CSSOM 树上找到每个节点对应的样式。</p> <p>遍历过程中会自动忽略那些不需要渲染的节点（比如脚本标记、元标记等）以及不可见的节点（比如设置了“display:none”样式）。同时也会将一些需要显示的伪类元素加到渲染树中。</p> <p>上面的DOM和CSSOM会合并过程如下图所示：</p> <p><img src="/assets/img/1603797939152-186796ce-105e-4ba8-b3e7-db388c38e503.e7fe73cc.png" alt="img"></p> <p>在合并生成渲染树的过程中，有以下几点需要注意：</p> <ul><li><p>元素如果被设置为 <code>display:none</code>，在 DOM 树中依然会显示，但是在 Render 树中不会显示；</p></li> <li><p>元素如果被设置为 <code>visibility:none</code>，那么 DOM 树和 Render 树中都会显示；</p></li> <li><p>脱离文档流值得就是脱离 Render Tree。</p></li></ul> <h2 id="_4-计算渲染树的布局"><a href="#_4-计算渲染树的布局" class="header-anchor">#</a> 4. 计算渲染树的布局</h2> <p>生成了渲染树之后，就可以进入布局阶段了，布局就是计算元素的大小及位置。</p> <p>计算元素布局是一个比较复杂的操作，因为需要考虑的因素有很多，包括字体大小、换行位置等，这些因素会影响段落的大小和形状，进而影响下一个段落的位置。</p> <p>布局完成后会输出对应的“盒模型”，它会精确地捕获每个元素的确切位置和大小，将所有相对值都转换为屏幕上的绝对像素。</p> <h2 id="_5-将布局渲染到屏幕上"><a href="#_5-将布局渲染到屏幕上" class="header-anchor">#</a> 5. 将布局渲染到屏幕上</h2> <p>绘制就是将渲染树中的每个节点转换成屏幕上的实际像素的过程。得到布局树这份“施工图”之后，渲染引擎并不能立即绘制，因为还不知道绘制顺序，如果没有弄清楚绘制顺序，那么很可能会导致页面被错误地渲染。</p> <p>例如，对于使用 z-index 属性的元素（如遮罩层）如果未按照正确的顺序绘制，则将导致渲染结果和预期不符（失去遮罩作用）。</p> <p>所以绘制过程中的第一步就是遍历布局树，生成绘制记录，然后渲染引擎会根据绘制记录去绘制相应的内容。</p> <p>对于无动画效果的情况，只需要考虑空间维度，生成不同的图层，然后再把这些图层进行合成，最终成为我们看到的页面。当然这个绘制过程并不是静态不变的，会随着页面滚动不断合成新的图形。</p> <p>上述五个步骤都是<strong>浏览器渲染进程中的GUI渲染线程</strong>完成的。</p> <p>GUI渲染线程主要的工作如下：</p> <ul><li>负责渲染浏览器页面，解析HTML、CSS，构建DOM树、CSSOM树、渲染树和绘制页面</li> <li>当界面需要重绘或由于某种操作引发回流时，该线程就会执行</li></ul> <h2 id="_6-渲染优化"><a href="#_6-渲染优化" class="header-anchor">#</a> 6. 渲染优化</h2> <p><strong>（1）针对JavaScript：</strong></p> <p>JavaScript既会阻塞HTML的解析，也会阻塞CSS的解析。因此我们可以对JavaScript的加载方式进行改变，来进行优化：</p> <p>（1）尽量将JavaScript文件放在body的最后</p> <p>（2） body中间尽量不要写<code>&lt;script&gt;</code>标签</p> <p>（3）<code>&lt;script&gt;</code>标签的引入资源方式有三种，有一种就是我们常用的直接引入，还有两种就是使用 async 属性和 defer 属性来异步引入，两者都是去异步加载外部的JS文件，不会阻塞DOM的解析（尽量使用异步加载）。三者的区别如下：</p> <ul><li><p><strong>script</strong> 立即停止页面渲染去加载资源文件，当资源加载完毕后立即执行js代码，js代码执行完毕后继续渲染页面</p></li> <li><p><strong>async</strong> 是在下载完成之后，立即异步加载，加载好后立即执行，多个带async属性的标签，不能保证加载的顺序</p></li> <li><p><strong>defer</strong> 是在下载完成之后，立即异步加载。加载好后，如果 DOM 树还没构建好，则先等 DOm 树解析好再执行；如果DOM树已经准备好，则立即执行。多个带defer属性的标签，按照顺序执行</p></li></ul> <p><strong>（2）针对CSS：</strong></p> <p>使用css有三种方式：使用<strong>link、@import、内联样式</strong>，其中link和@import都是导入外部样式。它们之间的区别：</p> <ul><li><p><strong>link</strong>：浏览器会派发一个新等线程(HTTP线程)去加载资源文件，与此同时GUI渲染线程会继续向下渲染代码</p></li> <li><p><a href=""><strong>@import</strong></a> ：GUI渲染线程会暂时停止渲染，去服务器加载资源文件，资源文件没有返回之前不会继续渲染(阻碍浏览器渲染)</p></li> <li><p><strong>style</strong>：GUI直接渲染</p></li></ul> <p>另外外部样式如果长时间没有加载完毕，浏览器为了用户体验，会使用浏览器会默认样式，确保首次渲染的速度。所以CSS一般写在headr中，让浏览器尽快发送请求去获取css样式。</p> <p>所以，在开发过程中，导入外部样式使用link，而不用@import。如果css少，尽可能采用内嵌样式，直接写在style标签中。</p> <p><strong>（3）针对DOM树、CSSOM树：</strong></p> <p>可以通过以下几种方式来减少渲染的时间：</p> <ul><li><p>HTML文件的代码层级尽量不要太深</p></li> <li><p>使用语义化的标签，来避免不标准语义化的特殊处理</p></li> <li><p>减少CSSD代码的层级，因为选择器是从左向右进行解析的</p></li></ul> <p><strong>（4）减少回流与重绘：</strong></p> <ul><li><p>操作DOM时，尽量在低层级的DOM节点进行操作</p></li> <li><p>不要使用<code>table</code>布局， 一个小的改动可能会使整个<code>table</code>进行重新布局</p></li> <li><p>使用CSS的表达式</p></li> <li><p>不要频繁操作元素的样式，对于静态页面，可以修改类名，而不是样式。</p></li> <li><p>使用absolute或者fixed，使元素脱离文档流，这样他们发生变化就不会影响其他元素</p></li> <li><p>避免频繁操作DOM，可以创建一个文档片段<code>documentFragment</code>，在它上面应用所有DOM操作，最后再把它添加到文档中</p></li> <li><p>将元素先设置<code>display: none</code>，操作结束后再把它显示出来。因为在display属性为none的元素上进行的DOM操作不会引发回流和重绘。</p></li> <li><p>将DOM的多个读操作（或者写操作）放在一起，而不是读写操作穿插着写。这得益于<strong>浏览器的渲染队列机制</strong>。</p></li></ul> <p>浏览器针对页面的回流与重绘，进行了自身的优化——<strong>渲染队列</strong></p> <p><strong>浏览器会将所有的回流、重绘的操作放在一个队列中，当队列中的操作到了一定的数量或者到了一定的时间间隔，浏览器就会对队列进行批处理。这样就会让多次的回流、重绘变成一次回流重绘。</strong></p> <p>上面，我们将多个读操作（或者写操作）放在一起，就会等所有的读操作进入队列之后执行，这样，原本应该是触发多次回流，变成了只触发一次回流。</p></div></section> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev"><a href="/docs/advanced/browserWork/crossDomain.html" class="prev">
            同源策略与跨域
          </a></span> <span class="next"><a href="/docs/advanced/browserWork/rubbish.html">
            浏览器垃圾回收机制
          </a></span></p></div> <div class="comments-wrapper"><!----></div> <ul class="side-bar sub-sidebar-wrapper" style="width:0;" data-v-70334359></ul></main> <!----></div></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div><div class="kanbanniang" data-v-5775ee02><div class="banniang-container" style="display:;" data-v-5775ee02><div class="messageBox" style="right:68px;bottom:290px;display:none;" data-v-5775ee02>
      欢迎欢迎
    </div> <div class="operation" style="right:90px;bottom:40px;display:;" data-v-5775ee02><i class="kbnfont kbn-ban-home ban-home" data-v-5775ee02></i> <i class="kbnfont kbn-ban-message message" data-v-5775ee02></i> <i class="kbnfont kbn-ban-close close" data-v-5775ee02></i> <a target="_blank" href="https://vuepress-theme-reco.recoluan.com/views/plugins/kanbanniang.html" data-v-5775ee02><i class="kbnfont kbn-ban-info info" data-v-5775ee02></i></a> <i class="kbnfont kbn-ban-theme skin" style="display:;" data-v-5775ee02></i></div> <canvas id="banniang" width="260px" height="320" class="live2d" style="right:90px;bottom:-20px;opacity:0.9;" data-v-5775ee02></canvas></div> <div class="showBanNiang" style="display:none;" data-v-5775ee02>
    看板娘
  </div></div><!----><!----><canvas id="vuepress-canvas-cursor"></canvas><!----><div class="RibbonAnimation"></div></div></div>
    <script src="/assets/js/app.50b0bd0e.js" defer></script><script src="/assets/js/6.e87d9ed0.js" defer></script><script src="/assets/js/1.ec164ee9.js" defer></script><script src="/assets/js/19.f3670cbe.js" defer></script>
  </body>
</html>
