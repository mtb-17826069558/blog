<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>React基本入门 |  </title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/favicon.ico">
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    
    <link rel="preload" href="/assets/css/0.styles.a5aa8a4f.css" as="style"><link rel="preload" href="/assets/js/app.50b0bd0e.js" as="script"><link rel="preload" href="/assets/js/6.e87d9ed0.js" as="script"><link rel="preload" href="/assets/js/1.ec164ee9.js" as="script"><link rel="preload" href="/assets/js/23.edc63186.js" as="script"><link rel="prefetch" href="/assets/js/10.f31dcad4.js"><link rel="prefetch" href="/assets/js/100.b65dbfb7.js"><link rel="prefetch" href="/assets/js/101.2f7804d4.js"><link rel="prefetch" href="/assets/js/102.19721495.js"><link rel="prefetch" href="/assets/js/103.3907d09f.js"><link rel="prefetch" href="/assets/js/104.6dc0d50d.js"><link rel="prefetch" href="/assets/js/105.8fc03431.js"><link rel="prefetch" href="/assets/js/106.2b3e80bb.js"><link rel="prefetch" href="/assets/js/107.00eeb0c1.js"><link rel="prefetch" href="/assets/js/108.6684f665.js"><link rel="prefetch" href="/assets/js/109.31599187.js"><link rel="prefetch" href="/assets/js/11.b3d0a7d3.js"><link rel="prefetch" href="/assets/js/110.110aebcc.js"><link rel="prefetch" href="/assets/js/111.41b6043b.js"><link rel="prefetch" href="/assets/js/112.efbffe48.js"><link rel="prefetch" href="/assets/js/113.ecb80c23.js"><link rel="prefetch" href="/assets/js/114.687d4b44.js"><link rel="prefetch" href="/assets/js/115.e370fa4f.js"><link rel="prefetch" href="/assets/js/116.323e724e.js"><link rel="prefetch" href="/assets/js/117.0ad5ef95.js"><link rel="prefetch" href="/assets/js/118.943466be.js"><link rel="prefetch" href="/assets/js/119.cffe859f.js"><link rel="prefetch" href="/assets/js/12.8ef5f3e8.js"><link rel="prefetch" href="/assets/js/120.d7e16a57.js"><link rel="prefetch" href="/assets/js/121.f551d960.js"><link rel="prefetch" href="/assets/js/122.2d19b98d.js"><link rel="prefetch" href="/assets/js/123.1c21f20a.js"><link rel="prefetch" href="/assets/js/124.b6b80c3a.js"><link rel="prefetch" href="/assets/js/125.59e4c603.js"><link rel="prefetch" href="/assets/js/126.a8118a06.js"><link rel="prefetch" href="/assets/js/127.e3a59b59.js"><link rel="prefetch" href="/assets/js/128.b7a37475.js"><link rel="prefetch" href="/assets/js/129.f0a3bd3b.js"><link rel="prefetch" href="/assets/js/13.6a90eae7.js"><link rel="prefetch" href="/assets/js/130.421ae976.js"><link rel="prefetch" href="/assets/js/131.f4c0fb70.js"><link rel="prefetch" href="/assets/js/132.525fac8e.js"><link rel="prefetch" href="/assets/js/133.5ae9ce44.js"><link rel="prefetch" href="/assets/js/134.95c2addc.js"><link rel="prefetch" href="/assets/js/135.dcacde31.js"><link rel="prefetch" href="/assets/js/136.d667ea7a.js"><link rel="prefetch" href="/assets/js/137.19b2ce8c.js"><link rel="prefetch" href="/assets/js/138.390429cb.js"><link rel="prefetch" href="/assets/js/139.c70b8ece.js"><link rel="prefetch" href="/assets/js/14.38618b9e.js"><link rel="prefetch" href="/assets/js/140.e5036082.js"><link rel="prefetch" href="/assets/js/141.7bfa2b08.js"><link rel="prefetch" href="/assets/js/142.e77dd390.js"><link rel="prefetch" href="/assets/js/143.8eb9154d.js"><link rel="prefetch" href="/assets/js/144.9767ec98.js"><link rel="prefetch" href="/assets/js/145.9e9c6701.js"><link rel="prefetch" href="/assets/js/146.ca4d12d0.js"><link rel="prefetch" href="/assets/js/147.da4e4bae.js"><link rel="prefetch" href="/assets/js/148.a21442de.js"><link rel="prefetch" href="/assets/js/149.bc249c71.js"><link rel="prefetch" href="/assets/js/15.8d4afe36.js"><link rel="prefetch" href="/assets/js/150.88c28b26.js"><link rel="prefetch" href="/assets/js/151.f46342e7.js"><link rel="prefetch" href="/assets/js/152.7b34cc5a.js"><link rel="prefetch" href="/assets/js/153.8c2f5dff.js"><link rel="prefetch" href="/assets/js/154.cb99ba1d.js"><link rel="prefetch" href="/assets/js/155.7f280a85.js"><link rel="prefetch" href="/assets/js/156.a86bb026.js"><link rel="prefetch" href="/assets/js/157.4391bcec.js"><link rel="prefetch" href="/assets/js/158.87a031d9.js"><link rel="prefetch" href="/assets/js/159.c23f4f61.js"><link rel="prefetch" href="/assets/js/16.d0096911.js"><link rel="prefetch" href="/assets/js/160.1b0ed9ef.js"><link rel="prefetch" href="/assets/js/161.21fb4a61.js"><link rel="prefetch" href="/assets/js/162.cc0391bb.js"><link rel="prefetch" href="/assets/js/163.d086c8b9.js"><link rel="prefetch" href="/assets/js/164.ec1fada9.js"><link rel="prefetch" href="/assets/js/165.0d293c44.js"><link rel="prefetch" href="/assets/js/166.8d66cec9.js"><link rel="prefetch" href="/assets/js/167.09c4b555.js"><link rel="prefetch" href="/assets/js/168.848e9a5a.js"><link rel="prefetch" href="/assets/js/169.a1a11dcf.js"><link rel="prefetch" href="/assets/js/17.87f12011.js"><link rel="prefetch" href="/assets/js/170.339f38b1.js"><link rel="prefetch" href="/assets/js/171.c92805e4.js"><link rel="prefetch" href="/assets/js/172.1e00ee49.js"><link rel="prefetch" href="/assets/js/173.bfcc3ae9.js"><link rel="prefetch" href="/assets/js/174.14665670.js"><link rel="prefetch" href="/assets/js/175.20f36a90.js"><link rel="prefetch" href="/assets/js/176.6081bc4d.js"><link rel="prefetch" href="/assets/js/177.9ef42251.js"><link rel="prefetch" href="/assets/js/178.9ed7eb1c.js"><link rel="prefetch" href="/assets/js/179.dfe3224a.js"><link rel="prefetch" href="/assets/js/18.08d0ada2.js"><link rel="prefetch" href="/assets/js/180.ca1b88dd.js"><link rel="prefetch" href="/assets/js/181.85fd587e.js"><link rel="prefetch" href="/assets/js/182.7dec60e9.js"><link rel="prefetch" href="/assets/js/183.ae99194d.js"><link rel="prefetch" href="/assets/js/184.a14fa938.js"><link rel="prefetch" href="/assets/js/185.5f4317e4.js"><link rel="prefetch" href="/assets/js/186.e4c20829.js"><link rel="prefetch" href="/assets/js/187.ad7aba45.js"><link rel="prefetch" href="/assets/js/188.51585f42.js"><link rel="prefetch" href="/assets/js/189.eef9c3af.js"><link rel="prefetch" href="/assets/js/19.f3670cbe.js"><link rel="prefetch" href="/assets/js/190.55ec796f.js"><link rel="prefetch" href="/assets/js/191.8af62975.js"><link rel="prefetch" href="/assets/js/192.f510c242.js"><link rel="prefetch" href="/assets/js/193.27739c1f.js"><link rel="prefetch" href="/assets/js/194.27ce2340.js"><link rel="prefetch" href="/assets/js/195.84027b6d.js"><link rel="prefetch" href="/assets/js/196.df11c94c.js"><link rel="prefetch" href="/assets/js/197.f23f9af1.js"><link rel="prefetch" href="/assets/js/198.884fdd82.js"><link rel="prefetch" href="/assets/js/199.8be019b7.js"><link rel="prefetch" href="/assets/js/20.8e38aad3.js"><link rel="prefetch" href="/assets/js/200.a0f74bb9.js"><link rel="prefetch" href="/assets/js/201.b8cab5b2.js"><link rel="prefetch" href="/assets/js/202.593bcdf1.js"><link rel="prefetch" href="/assets/js/203.38ada156.js"><link rel="prefetch" href="/assets/js/204.5e8e0d74.js"><link rel="prefetch" href="/assets/js/205.2f37d4c7.js"><link rel="prefetch" href="/assets/js/206.1e95b0c1.js"><link rel="prefetch" href="/assets/js/207.7b33e430.js"><link rel="prefetch" href="/assets/js/208.586fb54f.js"><link rel="prefetch" href="/assets/js/209.0f76a189.js"><link rel="prefetch" href="/assets/js/21.7c0af6e5.js"><link rel="prefetch" href="/assets/js/210.a03e7aa4.js"><link rel="prefetch" href="/assets/js/22.a43e198e.js"><link rel="prefetch" href="/assets/js/24.6acb4524.js"><link rel="prefetch" href="/assets/js/25.54b2d8c1.js"><link rel="prefetch" href="/assets/js/26.a6a7d99e.js"><link rel="prefetch" href="/assets/js/27.d562aaf3.js"><link rel="prefetch" href="/assets/js/28.bd34de62.js"><link rel="prefetch" href="/assets/js/29.7e560460.js"><link rel="prefetch" href="/assets/js/3.cbfd3302.js"><link rel="prefetch" href="/assets/js/30.9e4eb3a0.js"><link rel="prefetch" href="/assets/js/31.dc5c15a7.js"><link rel="prefetch" href="/assets/js/32.ea74517c.js"><link rel="prefetch" href="/assets/js/33.1e12504d.js"><link rel="prefetch" href="/assets/js/34.899cdc10.js"><link rel="prefetch" href="/assets/js/35.a417ea04.js"><link rel="prefetch" href="/assets/js/36.9be6f5b5.js"><link rel="prefetch" href="/assets/js/37.a92c1c1a.js"><link rel="prefetch" href="/assets/js/38.f08a12ba.js"><link rel="prefetch" href="/assets/js/39.aeba8fcb.js"><link rel="prefetch" href="/assets/js/4.221b21e6.js"><link rel="prefetch" href="/assets/js/40.59634b4d.js"><link rel="prefetch" href="/assets/js/41.bbe49b53.js"><link rel="prefetch" href="/assets/js/42.ba2e0d89.js"><link rel="prefetch" href="/assets/js/43.f1c4dea3.js"><link rel="prefetch" href="/assets/js/44.c67cec05.js"><link rel="prefetch" href="/assets/js/45.adb75bb8.js"><link rel="prefetch" href="/assets/js/46.95713282.js"><link rel="prefetch" href="/assets/js/47.9cd0cbcb.js"><link rel="prefetch" href="/assets/js/48.5d1125de.js"><link rel="prefetch" href="/assets/js/49.bd152b52.js"><link rel="prefetch" href="/assets/js/5.94a481b2.js"><link rel="prefetch" href="/assets/js/50.bd44ae39.js"><link rel="prefetch" href="/assets/js/51.b845484b.js"><link rel="prefetch" href="/assets/js/52.9f5e1b33.js"><link rel="prefetch" href="/assets/js/53.b82c5ca1.js"><link rel="prefetch" href="/assets/js/54.13dbf8b8.js"><link rel="prefetch" href="/assets/js/55.5951115e.js"><link rel="prefetch" href="/assets/js/56.21e28602.js"><link rel="prefetch" href="/assets/js/57.6d17fbd1.js"><link rel="prefetch" href="/assets/js/58.1f664d30.js"><link rel="prefetch" href="/assets/js/59.baa7e5ae.js"><link rel="prefetch" href="/assets/js/60.9b3f768f.js"><link rel="prefetch" href="/assets/js/61.ca432034.js"><link rel="prefetch" href="/assets/js/62.fcd5505e.js"><link rel="prefetch" href="/assets/js/63.e3e719f4.js"><link rel="prefetch" href="/assets/js/64.90f57282.js"><link rel="prefetch" href="/assets/js/65.4b3403d2.js"><link rel="prefetch" href="/assets/js/66.cec94f4b.js"><link rel="prefetch" href="/assets/js/67.979fb1ae.js"><link rel="prefetch" href="/assets/js/68.4655356e.js"><link rel="prefetch" href="/assets/js/69.ebac3cde.js"><link rel="prefetch" href="/assets/js/7.967c5e84.js"><link rel="prefetch" href="/assets/js/70.292403ea.js"><link rel="prefetch" href="/assets/js/71.cf3e7135.js"><link rel="prefetch" href="/assets/js/72.7b9c4dd4.js"><link rel="prefetch" href="/assets/js/73.8b0d3568.js"><link rel="prefetch" href="/assets/js/74.2a2a861a.js"><link rel="prefetch" href="/assets/js/75.25094287.js"><link rel="prefetch" href="/assets/js/76.baac8a99.js"><link rel="prefetch" href="/assets/js/77.3b641027.js"><link rel="prefetch" href="/assets/js/78.a01fd402.js"><link rel="prefetch" href="/assets/js/79.c86cd94e.js"><link rel="prefetch" href="/assets/js/8.80ca7005.js"><link rel="prefetch" href="/assets/js/80.f41c03e8.js"><link rel="prefetch" href="/assets/js/81.fa9db5b5.js"><link rel="prefetch" href="/assets/js/82.d878db34.js"><link rel="prefetch" href="/assets/js/83.2355ce47.js"><link rel="prefetch" href="/assets/js/84.b01be280.js"><link rel="prefetch" href="/assets/js/85.15df55fa.js"><link rel="prefetch" href="/assets/js/86.d1dd2952.js"><link rel="prefetch" href="/assets/js/87.1c5e3ca6.js"><link rel="prefetch" href="/assets/js/88.ad05de6d.js"><link rel="prefetch" href="/assets/js/89.60ab9921.js"><link rel="prefetch" href="/assets/js/9.15a9f0c5.js"><link rel="prefetch" href="/assets/js/90.0436c4c7.js"><link rel="prefetch" href="/assets/js/91.575612f5.js"><link rel="prefetch" href="/assets/js/92.9a654a18.js"><link rel="prefetch" href="/assets/js/93.e442b473.js"><link rel="prefetch" href="/assets/js/94.808f7829.js"><link rel="prefetch" href="/assets/js/95.e9a6e5a2.js"><link rel="prefetch" href="/assets/js/96.c46e7d83.js"><link rel="prefetch" href="/assets/js/97.39d336e3.js"><link rel="prefetch" href="/assets/js/98.168f8272.js"><link rel="prefetch" href="/assets/js/99.f2314237.js">
    <link rel="stylesheet" href="/assets/css/0.styles.a5aa8a4f.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container" data-v-1156296a><div data-v-1156296a><div id="loader-wrapper" class="loading-wrapper" data-v-d48f4d20 data-v-1156296a data-v-1156296a><div class="loader-main" data-v-d48f4d20><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div></div> <!----> <!----></div> <div class="password-shadow password-wrapper-out" style="display:none;" data-v-4e82dffc data-v-1156296a data-v-1156296a><h3 class="title" data-v-4e82dffc data-v-4e82dffc> </h3> <p class="description" data-v-4e82dffc data-v-4e82dffc></p> <label id="box" class="inputBox" data-v-4e82dffc data-v-4e82dffc><input type="password" value="" data-v-4e82dffc> <span data-v-4e82dffc>Konck! Knock!</span> <button data-v-4e82dffc>OK</button></label> <div class="footer" data-v-4e82dffc data-v-4e82dffc><span data-v-4e82dffc><i class="iconfont reco-theme" data-v-4e82dffc></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-4e82dffc>vuePress-theme-reco</a></span> <span data-v-4e82dffc><i class="iconfont reco-copyright" data-v-4e82dffc></i> <a data-v-4e82dffc><!---->
            
          <span data-v-4e82dffc>2017 - </span>
          2021
        </a></span></div></div> <div class="hide" data-v-1156296a><header class="navbar" data-v-1156296a><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/logo.png" alt=" " class="logo"> <span class="site-name"> </span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      前端
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/accumulate/javascript/basicsGrammar.html" class="nav-link"><i class="undefined"></i>
  前端基础
</a></li><li class="dropdown-item"><!----> <a href="/docs/advanced/guide/scss.html" class="nav-link"><i class="undefined"></i>
  前端进阶
</a></li></ul></div></div><div class="nav-item"><a href="/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  时间轴
</a></div><div class="nav-item"><a href="/docs/koa/koarapid/rapid.html" class="nav-link"><i class="iconfont reco-date"></i>
  Koa
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-account"></i>
      我的
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-1156296a></div> <aside class="sidebar" data-v-1156296a><div class="personal-info-wrapper" data-v-828910c6 data-v-1156296a><img src="/avatar.png" alt="author-avatar" class="personal-img" data-v-828910c6> <!----> <div class="num" data-v-828910c6><div data-v-828910c6><h3 data-v-828910c6>156</h3> <h6 data-v-828910c6>Articles</h6></div> <div data-v-828910c6><h3 data-v-828910c6>6</h3> <h6 data-v-828910c6>Tags</h6></div></div> <ul class="social-links" data-v-828910c6></ul> <hr data-v-828910c6></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      前端
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/accumulate/javascript/basicsGrammar.html" class="nav-link"><i class="undefined"></i>
  前端基础
</a></li><li class="dropdown-item"><!----> <a href="/docs/advanced/guide/scss.html" class="nav-link"><i class="undefined"></i>
  前端进阶
</a></li></ul></div></div><div class="nav-item"><a href="/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  时间轴
</a></div><div class="nav-item"><a href="/docs/koa/koarapid/rapid.html" class="nav-link"><i class="iconfont reco-date"></i>
  Koa
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-account"></i>
      我的
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav> <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>HTML+CSS</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>JavaScript</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Vue</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>React</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/advanced/react/introduction.html" aria-current="page" class="active sidebar-link">React基本入门</a></li><li><a href="/docs/advanced/react/practice.html" class="sidebar-link">React组件实践</a></li><li><a href="/docs/advanced/react/combination.html" class="sidebar-link">React组件化开发</a></li><li><a href="/docs/advanced/react/period.html" class="sidebar-link">React生命周期</a></li><li><a href="/docs/advanced/react/communication.html" class="sidebar-link">React组件通信</a></li><li><a href="/docs/advanced/react/route.html" class="sidebar-link">React路由</a></li><li><a href="/docs/advanced/react/apply.html" class="sidebar-link">React服务端渲染</a></li><li><a href="/docs/advanced/react/seo.html" class="sidebar-link">React SEO 优化</a></li><li><a href="/docs/advanced/react/redux.html" class="sidebar-link">Redux</a></li><li><a href="/docs/advanced/react/hoc.html" class="sidebar-link">React高阶HOC</a></li><li><a href="/docs/advanced/react/setState.html" class="sidebar-link">React setState 数据更新机制</a></li><li><a href="/docs/advanced/react/Vittual.html" class="sidebar-link">React Virtual DOM</a></li><li><a href="/docs/advanced/react/diff.html" class="sidebar-link">React diff 算法</a></li><li><a href="/docs/advanced/react/fiber.html" class="sidebar-link">React Fiber架构</a></li><li><a href="/docs/advanced/react/pureFunction.html" class="sidebar-link">React 纯函数组件</a></li><li><a href="/docs/advanced/react/hooks.html" class="sidebar-link">React Hooks</a></li><li><a href="/docs/advanced/react/portals.html" class="sidebar-link">React Portals</a></li><li><a href="/docs/advanced/react/suspense.html" class="sidebar-link">React Suspense</a></li><li><a href="/docs/advanced/react/internationalization.html" class="sidebar-link">React 国际化</a></li><li><a href="/docs/advanced/react/design.html" class="sidebar-link">React 组件设计模式</a></li><li><a href="/docs/advanced/react/zoology.html" class="sidebar-link">React 生态</a></li><li><a href="/docs/advanced/react/flow.html" class="sidebar-link">React 渲染流程</a></li><li><a href="/docs/advanced/react/performance.html" class="sidebar-link">React 性能优化</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>TypeScript</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Node.js</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>前端业务</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>前端工程化</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>前端可视化</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>计算机网络</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>前端设计模式</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>浏览器工作原理</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>前端性能优化</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-4e82dffc data-v-1156296a><h3 class="title" data-v-4e82dffc data-v-4e82dffc>React基本入门</h3> <!----> <label id="box" class="inputBox" data-v-4e82dffc data-v-4e82dffc><input type="password" value="" data-v-4e82dffc> <span data-v-4e82dffc>Konck! Knock!</span> <button data-v-4e82dffc>OK</button></label> <div class="footer" data-v-4e82dffc data-v-4e82dffc><span data-v-4e82dffc><i class="iconfont reco-theme" data-v-4e82dffc></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-4e82dffc>vuePress-theme-reco</a></span> <span data-v-4e82dffc><i class="iconfont reco-copyright" data-v-4e82dffc></i> <a data-v-4e82dffc><!---->
            
          <span data-v-4e82dffc>2017 - </span>
          2021
        </a></span></div></div> <div data-v-1156296a><main class="page" style="padding-right:0;"><section><div class="page-title"><h1 class="title">React基本入门</h1> <div data-v-1ff7123e><!----> <i class="iconfont reco-date" data-v-1ff7123e><span data-v-1ff7123e>9/21/2019</span></i> <!----> <i class="tags iconfont reco-tag" data-v-1ff7123e><span class="tag-item" data-v-1ff7123e>react</span></i></div></div> <div class="theme-reco-content content__default"><h2 id="一、开发前的准备"><a href="#一、开发前的准备" class="header-anchor">#</a> 一、开发前的准备</h2> <h3 id="_1-开发环境"><a href="#_1-开发环境" class="header-anchor">#</a> 1. 开发环境</h3> <p><strong>（1）Node.js</strong></p> <p>Node.js 是一个基于 Chrome V8 引擎的 JavaScript 运行环境。React 应用并不依赖于 Node.js 运行，但是开发过程中的一些编译过程（比如 npm，Webpack 等）都需要在 Node 环境下运行。因此，开发 React 应用前，应确保已经安装了 Node.js。</p> <p><strong>（2）NPM</strong></p> <p>NPM 是 Node 的一个包管理工具，每个包都是一个模块，能够使你轻松下载、管理模块依赖和版本。同样的，在使用 React 开发应用时，会依赖很多模块，这些模块就可以通过 NPM 进行下载。由于 NPM 已集成到了 Node.js 中，因此不用单独下载。</p> <h3 id="_2-开发工具"><a href="#_2-开发工具" class="header-anchor">#</a> 2. 开发工具</h3> <p><strong>（1）Webpack</strong></p> <p>Webpack 是一个前端资源加载和打包工具。Webpack 提供了模块化的开发方式，将各种静态资源视为模块，如 JavaScript、CSS、图片等，并通过 Webpack 生成优化过的代码。同样在开发 React 应用时也要用到 Webpack 来进行模块打包。</p> <p><strong>（2）Babel</strong></p> <p>Babel 是一个 JavaScript 编译器，主要用于将 ECMAScript 2015+ 版本的代码转换为向后兼容的 JavaScript 语法，以便能够运行在当前和旧版本的浏览器或其他环境中。</p> <p>由于我们在开发 React 应用中，会用到很多 ES6 的语法，但目前浏览器并不完全支持，因此在 Webpack 编译阶段，利用 Babel 将 ES6 及其以后的语法编译成 ES5 语法。</p> <h3 id="_3-开发依赖"><a href="#_3-开发依赖" class="header-anchor">#</a> 3. 开发依赖</h3> <p>开发React必须依赖三个库：</p> <ul><li><p>react：包含react所必须的核心代码</p></li> <li><p>react-dom：react渲染在不同平台所需要的核心代码</p></li> <li><p>babel：将jsx转换成React代码的工具</p></li></ul> <p>react-dom针对web和native所完成的事情不同：</p> <ul><li>web端：react-dom会讲jsx最终渲染成真实的DOM，显示在浏览器中</li> <li>native端：react-dom会讲jsx最终渲染成原生的控件（比如Android中的Button，iOS中的UIButton）。</li></ul> <p><strong>Babel</strong> ，又名 <strong>Babel.js，<strong>是目前前端使用非常广泛的编辑器、转移器。比如当下很多浏览器并不支持ES6的语法，但是确实ES6的语法非常的简洁和方便，我们</strong>开发时</strong>希望使用它。那么编写源码时我们就可以使用ES6来编写，之后通过Babel工具，将ES6转成大多数浏览器都支持的ES5的语法。</p> <p>React和Babel的关系：</p> <ul><li><p>默认情况下开发React其实可以不使用babel。</p></li> <li><p>但是前提是我们自己使用 React.createElement 来编写源代码，它编写的代码非常的繁琐和可读性差。</p></li> <li><p>那么我们就可以直接编写jsx（JavaScript XML）的语法，并且让babel帮助我们转换成React.createElement。</p></li></ul> <h2 id="二、react脚手架"><a href="#二、react脚手架" class="header-anchor">#</a> 二、React脚手架</h2> <p>现代的前端项目已经越来越复杂了：</p> <ul><li><p>不会再是在HTML中引入几个css文件，引入几个编写的js文件或者第三方的js文件这么简单；</p></li> <li><p>比如css可能是使用less、sass等预处理器进行编写，我们需要将它们转成普通的css才能被浏览器解析；</p></li> <li><p>比如JavaScript代码不再只是编写在几个文件中，而是通过模块化的方式，被组成在<strong>成百上千</strong>个文件中，我们需要通过模块化的技术来管理它们之间的相互依赖；</p></li> <li><p>比如项目需要依赖很多的第三方库，如何更好的管理它们（比如管理它们的依赖、版本升级等）；</p></li></ul> <p>为了解决这些问题，前端脚手架就出现了。例如babel、webpack、gulp等等，可以通过它们来进行转换规则、打包依赖、热更新等等。总之，<strong>脚手架让项目从搭建到开发，再到部署，整个流程变得快速和便捷。</strong></p> <p>目前比较流行的的框架Vue，它的脚手架是vue-cli；React的脚手架就是create-react-app。它们的作用就是帮助我们生成一个通用的目录结构，并且已经将我们所需的工程环境配置好了。目前，这些脚手架都是使用node.js编写的，并且都是基于Webpack的，它们需要运行在Node环境下。</p> <p>上面我们也说到了NPM了，它是 Node 的一个包管理工具，每个包都是一个模块，能够使你轻松下载、管理模块依赖和版本。同样的，在使用 React 开发应用时，会依赖很多模块，这些模块就可以通过 NPM 进行下载。由于 NPM 已集成到了 Node.js 中，因此不用单独下载。</p> <p>除了NPM，还有一个比较出名的Node包管理工具yarn，它是为了弥补NPM的一些缺陷而出现的，早期的NPM存在很多的缺陷，比如按安装依赖速度很慢，版本依赖混乱等等一系列的问题，虽然后面的版本进行了很多的升级和改进，但还是很多人喜欢使用yarn，React脚手架也默认使用yarn。</p> <p>安装yarn：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>npm install <span class="token operator">-</span>g yarn
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>安装好yarn就可以使用了，下面来看一下npm和yarn命令的对照表：</p> <p><img src="/assets/img/1605601635296-7ea0eda3-c017-46a3-912d-74ad02b1bfa3.878eac5e.png" alt="img"></p> <p>安装完之后，就可以安装React的脚手架了：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>npm install <span class="token operator">-</span>g create<span class="token operator">-</span>react<span class="token operator">-</span>app
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>安装好之后，可以运行：<code>create-react-app --version</code> 查看版本号，如果版本号正常展示，证明安装成功。</p> <h2 id="三、创建react项目"><a href="#三、创建react项目" class="header-anchor">#</a> 三、创建React项目</h2> <p>这里我们借助上面所说的的React脚手架 <strong>Create React App</strong> 创建 React 应用。该脚手架已经将 Webpack、Babel 等工具的配置做了封装，无需开发者做配置，提供了一个零配置的现代构建。</p> <p>Create React App 对于开发环境版本有一定的要求，具体如下：</p> <p>npm 版本 &gt;= 5.6</p> <p>node 版本 &gt;= 8.10</p> <p>快速搭建 React 应用需要三个步骤：</p> <ol><li><p>创建 React 项目；</p></li> <li><p>启动项目；</p></li> <li><p>暴露配置项。</p></li></ol> <p>下面我们就来逐步操作，创建一个React项目：</p> <p>**（1）**<strong>创建 React 项目</strong></p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>create<span class="token operator">-</span>react<span class="token operator">-</span>app my<span class="token operator">-</span>demo
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>这里项目名不能使用驼峰的形式(即不能包含大写字母)，不然会有以下报错：<code>name can no longer contain capital letters</code>。</p> <p><strong>（2）启动项目</strong></p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>cd my<span class="token operator">-</span>demo 
npm start
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>当看到以下界面时，说明你的 React 应用就已经安装好了。</p> <p><img src="/assets/img/1605444986314-68a304d5-f153-4032-aa63-25f8043b4706.902ad1bc.png" alt="img"></p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>├── <span class="token constant">README</span><span class="token punctuation">.</span>md                   文档 
├── <span class="token keyword">package</span><span class="token punctuation">.</span>json                npm 依赖信息
├── <span class="token keyword">package</span><span class="token operator">-</span>lock<span class="token punctuation">.</span>json           依赖模块的版本信息
├── <span class="token punctuation">.</span>gitignore                  忽略打包的文件
├── <span class="token keyword">public</span>                      静态资源文件夹
│   ├── favicon<span class="token punctuation">.</span>ico             网站icon图标
│   ├── index<span class="token punctuation">.</span>html              模版
│   ├── logo192<span class="token punctuation">.</span>png             <span class="token number">192</span><span class="token operator">*</span><span class="token number">192</span>大小的react logo
│   ├── logo512<span class="token punctuation">.</span>png             <span class="token number">512</span><span class="token operator">*</span><span class="token number">512</span>大小的react logo
│   ├── manifest<span class="token punctuation">.</span>json           移动桌面快捷方式配置文件
│   └── robots<span class="token punctuation">.</span>txt              网站与爬虫间的协议
├── src                         源码文件夹
│   ├── App<span class="token punctuation">.</span>css
│   ├── App<span class="token punctuation">.</span>js                  根组件
│   ├── App<span class="token punctuation">.</span>test<span class="token punctuation">.</span>js
│   ├── index<span class="token punctuation">.</span>css               全局样式
│   ├── index<span class="token punctuation">.</span>js                入口文件
│   ├── logo<span class="token punctuation">.</span>svg    
│   └── serviceWorker<span class="token punctuation">.</span>js        <span class="token constant">PWA</span> 支持
└── node_modules                依赖包
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p>在src文件夹有一个serviceWorker.js 文件，在public文件有一个manifest.json文件，他们涉及到了一个知识点——PWA，PWA全称为Progressive Web App，即渐进式WEB应用；一个 PWA 应用首先是一个网页, 可以通过 Web 技术编写出一个网页应用；添加上 App Manifest 和 Service Worker 来实现 PWA 的安装和离线等功能；这种Web存在的形式，我们也称之为是 Web App。</p> <p>PWA解决了哪些问题呢？</p> <ul><li><p>可以添加至主屏幕，点击主屏幕图标可以实现启动动画以及隐藏地址栏；</p></li> <li><p>实现离线缓存功能，即使用户手机没有网络，依然可以使用一些离线功能；</p></li> <li><p>实现了消息推送；</p></li></ul> <p>还有类似一系列类似于Native App相关的功能。</p> <p><strong>（3）暴露配置项</strong></p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>npm run eject
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>在初始化好的项目中，Webpack等配置默认都是隐藏的，要想看到这些配置，就要执行以上命令来暴露项目的配置项。</p> <p>暴露配置项之后，项目根目录又多出两个文件：scripts和config，他们都是被隐藏的配置项，同时package.json中的配置项也会变多，一些隐藏的配置项都暴露了出来。</p> <h2 id="四、react初体验"><a href="#四、react初体验" class="header-anchor">#</a> 四、React初体验</h2> <p>下面我们就来用react 实现一下Hello World：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>打开 src<span class="token operator">/</span>index<span class="token punctuation">.</span>js 文件，可以看到 render 的模版是 App<span class="token punctuation">.</span>js，代码如下：

<span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span> <span class="token comment">// 使用JSX语法必须引入react</span>
<span class="token keyword">import</span> ReactDOM <span class="token keyword">from</span> <span class="token string">'react-dom'</span>
<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">'./App.js'</span>

ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>App <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>其中，root 是 index.html 模版里的元素，渲染出来的 App 组件放在此处。</p> <p>下面我们来尝试修改 App.js 文件：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// src/App.js</span>
<span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">import</span> <span class="token string">'./App.css'</span>
<span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
        <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">&quot;App&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>header className<span class="token operator">=</span><span class="token string">&quot;App-header&quot;</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>
                  hello world
                <span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>header<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> App
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>修改完保存之后，页面就会自动刷新，显示如下：</p> <p><img src="/assets/img/1605447084460-eaca666c-f277-496f-a7ca-5c0239cfc4c0.9c29a7ae.png" alt="img"></p> <p>至此，我们就完成了一个React应用的创建。</p> <p>那React的数据在哪里定义呢，Vue是在data中定义数据，而React是在state中定义数据。</p> <p>在组件中的数据，我们可以分成两类：</p> <ul><li>参与界面更新的数据：当数据变量时，需要更新组件渲染的内容</li> <li>不参与界面更新的数据：当数据变量时，不需要更新将组建渲染的内容</li></ul> <p>参与界面更新的数据我们也可以称之为是参与数据流，这个数据是定义在当前对象的state中</p> <ul><li><p>我们可以通过在构造函数中 this.state = {定义的数据}</p></li> <li><p>当我们的数据发生变化时，我们可以调用 this.setState 来更新数据，并且通知React进行update操作</p></li> <li><p>在进行update操作时，就会重新调用render函数，并且使用最新的数据，来渲染界面</p></li></ul> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
      <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">pops</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
          message<span class="token operator">:</span> <span class="token string">&quot;hello world!&quot;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h2 id="五、初识jsx"><a href="#五、初识jsx" class="header-anchor">#</a> 五、初识JSX</h2> <h3 id="_1-什么是jsx"><a href="#_1-什么是jsx" class="header-anchor">#</a> 1. 什么是JSX</h3> <p>我们来看一个变量的声明：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> element <span class="token operator">=</span> <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>Hello<span class="token punctuation">,</span> world<span class="token operator">!</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>这个变量声明既不是字符串也不是HTML，它被称为JSX，是一种JavaScript的语法扩展（eXtension），也在很多地方称之为JavaScript XML，因为看起就是一段XML语法。它用于描述我们的UI界面，并且其完成可以和JavaScript融合在一起使用；</p> <h3 id="_2-为什么使用jsx"><a href="#_2-为什么使用jsx" class="header-anchor">#</a> 2. 为什么使用JSX</h3> <p>那为什么React要选择使用JSX呢？</p> <p>（1） React认为渲染逻辑本质上与其他UI逻辑存在内在耦合</p> <ul><li>比如UI需要绑定事件（button、a原生等等）；</li> <li>比如UI中需要展示数据状态，在某些状态发生改变时，又需要改变UI；</li></ul> <p>（2）它们之间是密不可分，所以React没有讲标记分离到不同的文件中，而是将它们组合到了一起，这个地方就是组件（Component）；</p> <p>其实，JSX是嵌入到JavaScript中的一种结构语法；</p> <p><strong>JSX的优点：</strong></p> <ul><li><p>使用熟悉的语法定义 HTML 元素，提供更加语义化的标签，使用 JSX 编写模板更简单快速；</p></li> <li><p>更加直观：JSX 让小组件更加简单、明了、直观；</p></li> <li><p>抽象了 React 元素的创建过程，使得编写组件变得更加简单；</p></li> <li><p>JSX 执行更快，因为它在编译为 JavaScript 代码后进行了优化；</p></li> <li><p>JSX 是类型安全的，在编译过程中就能发现错误；</p></li> <li><p>防注入攻击，所有的内容在渲染之前都被转换成了字符串，可以有效地防止 XSS（跨站脚本） 攻击。</p></li></ul> <h3 id="_3-jsx书写规范"><a href="#_3-jsx书写规范" class="header-anchor">#</a> 3. JSX书写规范</h3> <p>JSX的书写规范如下：</p> <ul><li><p>JSX的顶层<strong>只能有一个根元素</strong>，所以我们很多时候会在外层包裹一个div原生（或者使用Fragment，文档片段）；</p></li> <li><p>为了方便阅读，我们通常在jsx的外层包裹一个小括号()，这样可以方便阅读，并且jsx可以进行换行书写；</p></li> <li><p>JSX中的标签可以是单标签，也可以是双标签；注意：如果是单标签，必须以/&gt;结尾；</p></li> <li><p>在使用变量时，我们可以将其放在一个大括号中，大括号内放置任何有效的 JavaScript 表达式</p></li></ul> <p><strong>下面来是一个计数器的例子：</strong></p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
      <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">pops</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
          counter<span class="token operator">:</span> <span class="token number">0</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>

      <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>
          <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>h2<span class="token operator">&gt;</span>当前计数<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>counter<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>increment<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">+</span><span class="token number">1</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">decrement</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">-</span><span class="token number">1</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token string">&quot;&quot;</span> alt<span class="token operator">=</span><span class="token string">&quot;&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token punctuation">)</span>
      <span class="token punctuation">}</span>

      <span class="token function">increment</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
          counter<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>counter <span class="token operator">+</span> <span class="token number">1</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>

      <span class="token function">decrement</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
          counter<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>counter <span class="token operator">-</span> <span class="token number">1</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>App<span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;app&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br></div></div><h3 id="_4-jsx注释"><a href="#_4-jsx注释" class="header-anchor">#</a> 4. <strong>JSX注释</strong></h3> <p>JSX的注释和其他框架略有不同，通常有三种方法：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>
          <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
            <span class="token punctuation">{</span><span class="token comment">/* 单行注释 */</span><span class="token punctuation">}</span>
            <span class="token punctuation">{</span><span class="token comment">/*
                多行注释   
            */</span><span class="token punctuation">}</span>
            <span class="token operator">&lt;</span>h2<span class="token operator">&gt;</span>Hello World<span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">&gt;</span> <span class="token comment">// 行尾注释</span>
          <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="_5-jsx嵌入变量"><a href="#_5-jsx嵌入变量" class="header-anchor">#</a> <strong>5. JSX嵌入变量</strong></h3> <p>在JSX中嵌入变量时，通常使用一个大括号包裹，不同类型的变量的显示效果是不一样的：</p> <p>（1）情况一：当变量是Number、String、Array类型时，可以直接显示</p> <p>（2）情况二：当变量是null、undefined、Boolean类型时，内容为空；</p> <ul><li>如果希望可以显示null、undefined、Boolean，那么需要转成字符串；</li> <li>转换的方式有很多，比如toString方法、和空字符串拼接，String(变量)等方式；</li></ul> <p>（3） 情况三：对象类型不能作为子元素（not valid as a React child）</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
      <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
          <span class="token comment">// 1.在{}中可以正常显示显示的内容</span>
          name<span class="token operator">:</span> <span class="token string">&quot;why&quot;</span><span class="token punctuation">,</span> <span class="token comment">// String</span>
          age<span class="token operator">:</span> <span class="token number">18</span><span class="token punctuation">,</span> <span class="token comment">// Number</span>
          names<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;abc&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;cba&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;bac&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// Array</span>

          <span class="token comment">// 2.在{}中不能显示(忽略)</span>
          test1<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token comment">// null</span>
          test2<span class="token operator">:</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span> <span class="token comment">// undefined</span>
          test3<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// Boolean</span>

          <span class="token comment">// 3.对象不能作为jsx的子类</span>
          friend<span class="token operator">:</span> <span class="token punctuation">{</span>
            name<span class="token operator">:</span> <span class="token string">&quot;zhangsan&quot;</span><span class="token punctuation">,</span>
            age<span class="token operator">:</span> <span class="token number">40</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>

      <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>
          <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>h2<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>h2<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>age<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>h2<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>names<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">&gt;</span>

            <span class="token operator">&lt;</span>h2<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>test1 <span class="token operator">+</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>h2<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>test2 <span class="token operator">+</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>h2<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>test3<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">&gt;</span>

            <span class="token operator">&lt;</span>h2<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>friend<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br></div></div><h3 id="_6-jsx嵌入表达式"><a href="#_6-jsx嵌入表达式" class="header-anchor">#</a> 6. <strong>JSX嵌入表达式</strong></h3> <p>在JSX中嵌入表达式：</p> <ul><li><p>运算表达式</p></li> <li><p>三元运算符</p></li> <li><p>进行函数调用</p></li></ul> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 对state中的变量进行解构赋值</span>
        <span class="token keyword">const</span> <span class="token punctuation">{</span> firstname<span class="token punctuation">,</span> lastname<span class="token punctuation">,</span> isLogin <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">;</span>

        <span class="token keyword">return</span> <span class="token punctuation">(</span>
          <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
            <span class="token punctuation">{</span><span class="token comment">/*1.运算符表达式*/</span><span class="token punctuation">}</span>
            <span class="token operator">&lt;</span>h2<span class="token operator">&gt;</span><span class="token punctuation">{</span> firstname <span class="token operator">+</span> <span class="token string">&quot; &quot;</span> <span class="token operator">+</span> lastname <span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>h2<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token number">20</span> <span class="token operator">*</span> <span class="token number">50</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">&gt;</span>

            <span class="token punctuation">{</span><span class="token comment">/*2.三元表达式*/</span><span class="token punctuation">}</span>
            <span class="token operator">&lt;</span>h2<span class="token operator">&gt;</span><span class="token punctuation">{</span> isLogin <span class="token operator">?</span> <span class="token string">&quot;欢迎回来~&quot;</span><span class="token operator">:</span> <span class="token string">&quot;请先登录~&quot;</span> <span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">&gt;</span>

            <span class="token punctuation">{</span><span class="token comment">/*3.进行函数调用*/</span><span class="token punctuation">}</span>
            <span class="token operator">&lt;</span>h2<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getFullName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
      <span class="token function">getFullName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>firstname <span class="token operator">+</span> <span class="token string">&quot; &quot;</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>lastname<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><h3 id="_7-jsx绑定属性"><a href="#_7-jsx绑定属性" class="header-anchor">#</a> 7. <strong>JSX绑定属性</strong></h3> <p>常见的绑定的属性有以下几种：</p> <ul><li><p>元素都会有title属性</p></li> <li><p>img元素会有src属性</p></li> <li><p>a元素会有href属性</p></li> <li><p>元素可能需要绑定class</p></li> <li><p>原生使用内联样式style</p></li></ul> <p>我们可以使用大括号来给元素绑定属性：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
      <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
          title<span class="token operator">:</span> <span class="token string">&quot;标题&quot;</span><span class="token punctuation">,</span>
          imgUrl<span class="token operator">:</span> <span class="token string">&quot;http://p2.music.126.net/L8IDEWMk_6vyT0asSkPgXw==/109951163990535633.jpg&quot;</span><span class="token punctuation">,</span>
          link<span class="token operator">:</span> <span class="token string">&quot;http://www.baidu.com&quot;</span><span class="token punctuation">,</span>
          active<span class="token operator">:</span> <span class="token boolean">true</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>

      <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> <span class="token punctuation">{</span> title<span class="token punctuation">,</span> imgUrl<span class="token punctuation">,</span> link<span class="token punctuation">,</span> active <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>
          <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
            <span class="token punctuation">{</span><span class="token comment">/* 1.绑定普通属性 */</span><span class="token punctuation">}</span>
            <span class="token operator">&lt;</span>h2 title<span class="token operator">=</span><span class="token punctuation">{</span>title<span class="token punctuation">}</span><span class="token operator">&gt;</span>我是标题<span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token punctuation">{</span><span class="token function">getSizeImage</span><span class="token punctuation">(</span>imgUrl<span class="token punctuation">,</span> <span class="token number">140</span><span class="token punctuation">)</span><span class="token punctuation">}</span> alt<span class="token operator">=</span><span class="token string">&quot;&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>a href<span class="token operator">=</span><span class="token punctuation">{</span>link<span class="token punctuation">}</span> target<span class="token operator">=</span><span class="token string">&quot;_blank&quot;</span><span class="token operator">&gt;</span>百度一下<span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">&gt;</span>

            <span class="token punctuation">{</span><span class="token comment">/* 2.绑定class */</span><span class="token punctuation">}</span>
            <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">&quot;box title&quot;</span><span class="token operator">&gt;</span>我是div元素<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">&quot;box title &quot;</span> <span class="token operator">+</span> <span class="token punctuation">(</span>active <span class="token operator">?</span> <span class="token string">&quot;active&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>我也是div元素<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>label htmlFor<span class="token operator">=</span><span class="token string">&quot;&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>label<span class="token operator">&gt;</span>

            <span class="token punctuation">{</span><span class="token comment">/* 3.绑定style */</span><span class="token punctuation">}</span>
            <span class="token operator">&lt;</span>div style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>color<span class="token operator">:</span> <span class="token string">&quot;red&quot;</span><span class="token punctuation">,</span> fontSize<span class="token operator">:</span> <span class="token string">&quot;50px&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>我是div<span class="token punctuation">,</span>绑定style属性<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">function</span> <span class="token function">getSizeImage</span><span class="token punctuation">(</span><span class="token parameter">imgUrl<span class="token punctuation">,</span> size</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> imgUrl <span class="token operator">+</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">?param=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>size<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">x</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>size<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br></div></div><p><strong>注意：</strong></p> <ul><li><p>上面我们在给元素绑定class时，由于我们写的是JSX语法，它是和JavaScript的语法混在一起的，所以我们如果直接使用JavaScript中的关键字class就不太好，所以我们可以使用className来代替class，在label标签中，通常使用的是的for来绑定属性，但是for也是JavaScript中的关键字，所以使用htmlFor来代替。</p></li> <li><p>如果我们想要给className添加值，就要使用JavaScript来给他动态添加。</p></li> <li><p>在给元素绑定style时，需要注意，外层的大括号是用JSX语法往内部嵌套JavaScript代码。而内部的大括号是一个对象，它里面是键值对，表示元素的样式属性及属性值。</p></li> <li><p>在给元素绑定style时，如果元素的属性值是一个值，就要加上双引号。当属性是由多个单词组成的时候，需要用驼峰命名法来表示，例如：fontSize。</p></li></ul> <h3 id="_8-jsx绑定事件"><a href="#_8-jsx绑定事件" class="header-anchor">#</a> 8. JSX绑定事件</h3> <p>在JSX中绑定事件时，可以使用以下方式：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>btnClick<span class="token punctuation">}</span><span class="token operator">&gt;</span>按钮<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>可以看出 React 元素的事件处理和 DOM 元素的很相似，但存在一些语法上的差异：</p> <ul><li><p>React 的事件采用驼峰式命名，而不是纯小写的方式；</p></li> <li><p>使用 JSX 语法时，需要传入一个函数作为事件处理函数，而不是一个字符串；</p></li> <li><p>使用函数时不能加括号，不然会直接执行。</p></li></ul> <p>需要注意的是，如果我们绑定的事件函数中，如果使用到了当前组件对象中的属性，我们无法使用this直接获取state中的数据。这是因为，我们当前调用的函数，不是在元素上直接调用它的，而是React的内部发现这个按钮绑定了一个事件，就会在内部对这个函数做了一个回调，他拿到这个方法btnClick之后，就对其使用了btnClick.call()，并为其传递了一个参数undefined，也就是在执行这个函数的时候，给它绑定了一个动态的this，this指向了undefined。</p> <p>注意：在 React 中不能使用 return false 的方式阻止事件的默认行为，必须要显式的调用事件对象的 preventDefault 方法来阻止事件的默认行为。</p> <p>这里补充一下<strong>this的指向问题</strong>：</p> <p>在类中直接定义一个函数，并且将这个函数绑定到html原生的onClick事件上，当前这个函数的this默认情况下指向是undefined。因为在正常的DOM操作中，监听点击，监听函数中的this其实是节点对象（比如说是button对象）。</p> <p>因为React并不是直接渲染成真实的DOM，我们所编写的button只是一个语法糖，它的本质React的Element对象。那么在这里发生监听的时候，react给我们的函数绑定的this，默认情况下就是一个undefined；</p> <p>我们在绑定的函数中，可能想要使用当前对象，比如执行 this.setState 函数，就必须拿到当前对象的this，我们就需要在传入函数时，给这个函数直接绑定this，类似于下面的写法：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">changeText</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>改变文本<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>我们希望绑定事件函数中的this指向这个组件对象，这里有三种解决方案：</p> <p><strong>（1）显示绑定</strong>，就像上面所说的，使用bind方法将这个函数的this绑定到当前组件对象的this上</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">btnClick</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>按钮<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>也可以在构造方法中，将该方法进行重新赋值</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>btnClick <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">btnClick</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>这种方法固然是可以实现，但是可能会产生很多重复的代码。</p> <p><strong>（2）使用箭头函数定义函数</strong></p> <p>因为箭头函数永远不绑定this，它里面的this会读取上一层作用域的属性，如果没有找到就逐层向上查找。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token function-variable function">btnClick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>（3）传入一个箭头函数，在箭头函数中调用需要执行的函数（推荐使用）</strong></p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">btnClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>按钮<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>它的原理就是，当我们点击按钮时，就会执行箭头函数中的函数体，也就是执行事件绑定的方法。当执行这个方法的时候，由于箭头函数是不绑定this的，所以它会向上层作用域的render中进行查找，这样就会将this隐式绑定在事件函数上面。</p> <p>在执行事件函数时，有可能我们需要获取一些参数信息：比如event对象、其他参数</p> <p>（1）情况一：获取event对象</p> <ul><li>很多时候我们需要拿到event对象来做一些事情（比如阻止默认行为）</li> <li>假如我们用不到this，那么直接传入函数就可以获取到event对象；</li></ul> <p>（2）情况二：获取更多参数</p> <ul><li>有更多参数时，我们最好的方式就是传入一个箭头函数，主动执行的事件函数，并且传入相关的其他参数；</li></ul> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span> <span class="token parameter">event</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">btnClick</span><span class="token punctuation">(</span>item<span class="token punctuation">,</span> index<span class="token punctuation">,</span> event<span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>按钮<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="_9-react条件渲染"><a href="#_9-react条件渲染" class="header-anchor">#</a> 9. React条件渲染</h3> <p>某些情况下，界面的内容会根据不同的情况显示不同的内容，或者决定是否渲染某部分内容：</p> <ul><li>在vue中，我们会通过指令来控制：比如v-if、v-show；</li> <li>在React中，所有的条件判断都和普通的JavaScript代码一致；</li></ul> <p>常见的条件渲染的方式有以下三种：</p> <ul><li><p>方式一：条件判断语句，适合逻辑较多的情况</p></li> <li><p>方式二：三元运算符，适合逻辑比较简单</p></li> <li><p>方式三：与运算符&amp;&amp;，如果条件成立，渲染&amp;&amp;后面的组件；如果条件不成立，什么内容也不渲染；</p></li></ul> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> <span class="token punctuation">{</span> isLogin <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">;</span>

        <span class="token comment">// 1.方案一:通过if判断: 逻辑代码非常多的情况</span>
        <span class="token keyword">let</span> welcome <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token keyword">let</span> btnText <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>isLogin<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          welcome <span class="token operator">=</span> <span class="token operator">&lt;</span>h2<span class="token operator">&gt;</span>欢迎回来<span class="token operator">~</span><span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">&gt;</span>
          btnText <span class="token operator">=</span> <span class="token string">&quot;退出&quot;</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
          welcome <span class="token operator">=</span> <span class="token operator">&lt;</span>h2<span class="token operator">&gt;</span>请先登录<span class="token operator">~</span><span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">&gt;</span>
          btnText <span class="token operator">=</span> <span class="token string">&quot;登录&quot;</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">return</span> <span class="token punctuation">(</span>
          <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>我是div元素<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>

            <span class="token punctuation">{</span>welcome<span class="token punctuation">}</span>
            <span class="token punctuation">{</span><span class="token comment">/* 2.方案二: 三元运算符 */</span><span class="token punctuation">}</span>
            <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token parameter">e</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">loginClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">{</span>isLogin <span class="token operator">?</span> <span class="token string">&quot;退出&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;登录&quot;</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>


            <span class="token operator">&lt;</span>h2<span class="token operator">&gt;</span><span class="token punctuation">{</span>isLogin <span class="token operator">?</span> <span class="token string">&quot;你好, React&quot;</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">&gt;</span>

            <span class="token punctuation">{</span><span class="token comment">/* 3.方案三: 逻辑与&amp;&amp; */</span><span class="token punctuation">}</span>
            <span class="token punctuation">{</span><span class="token comment">/* 逻辑与: 一个条件不成立, 后面的条件都不会进行判断了 */</span><span class="token punctuation">}</span>
            <span class="token operator">&lt;</span>h2<span class="token operator">&gt;</span><span class="token punctuation">{</span> isLogin <span class="token operator">&amp;&amp;</span> <span class="token string">&quot;你好, React&quot;</span> <span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">&gt;</span>
            <span class="token punctuation">{</span> isLogin <span class="token operator">&amp;&amp;</span> <span class="token operator">&lt;</span>h2<span class="token operator">&gt;</span>你好<span class="token punctuation">,</span> React<span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">&gt;</span> <span class="token punctuation">}</span>
          <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br></div></div><p>在Vue中，v-if是对元素隐藏时，会将元素送DOM树上删除掉；而v-show只是对元素进行隐藏，其原理就是给元素添加display:none，它更适用于频繁切换某个元素的显示/隐藏的情况，会大大的节省开销。</p> <p>那在上面我们对React元素的显示和隐藏都相当于Vue中v-if，元素在隐藏之后就不会出现在DOM树上，我们可以用React来实现一下Vue中v-show指令的效果：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
      <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
          isLogin<span class="token operator">:</span> <span class="token boolean">true</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>

      <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> <span class="token punctuation">{</span> isLogin <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">;</span>
        <span class="token keyword">const</span> titleDisplayValue <span class="token operator">=</span> isLogin <span class="token operator">?</span> <span class="token string">&quot;block&quot;</span><span class="token operator">:</span> <span class="token string">&quot;none&quot;</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>
          <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token parameter">e</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">loginClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">{</span>isLogin <span class="token operator">?</span> <span class="token string">&quot;退出&quot;</span><span class="token operator">:</span> <span class="token string">&quot;登录&quot;</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>h2 style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>display<span class="token operator">:</span> titleDisplayValue<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>你好<span class="token punctuation">,</span> React<span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token punctuation">)</span>
      <span class="token punctuation">}</span>

      <span class="token function">loginClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
          isLogin<span class="token operator">:</span> <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>isLogin
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><p>这样，元素隐藏之后还是会在DOM树上，只是不会显示在页面上，节省了开销，提高了页面的性能。</p> <h3 id="_10-react列表渲染"><a href="#_10-react列表渲染" class="header-anchor">#</a> 10. React列表渲染</h3> <p>在实际的开发过程中，我们通常会将请求的大量数据渲染成列表，在Vue中，我们可以使用v-for进行列表的渲染，而在React中需要我们通过JavaScript代码的方式组织数据，转成JSX。</p> <p>在React中，展示列表最多的方式就是使用数组的map方法，使用它来遍历数组元素，也可以在遍历的过程中对数组元素进行操作；除此之外，为我们还会用到filter方法过滤数据，使用slice方法截取数据等等。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token operator">&lt;</span>ul<span class="token operator">&gt;</span>
     <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>numbers<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> item <span class="token operator">&gt;=</span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token operator">&lt;</span>li key<span class="token operator">=</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>id<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">{</span>item<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span><span class="token punctuation">)</span>
     <span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>需要注意的是，在渲染是，我们需要给渲染项添加一个key，不然会报错：warning:Each child in a list should have a unique “key” prop.在React 中，key 属性是给 React 自己用的一个特殊属性，就是说即使为一个组件设置 key 之后，我们也无法获取这个组件的 key 值。它是一种身份标识，每个 key 对应一个组件。key 的值必须保证唯一且稳定，它类似于数据库中的主键 id 一样，有且唯一。 key和React中的diff算法密切相关。</p> <h3 id="_11-react表单处理"><a href="#_11-react表单处理" class="header-anchor">#</a> 11. React表单处理</h3> <p>React的组件分为<strong>受控组件</strong>和<strong>非受控组件：</strong></p> <ul><li><strong>受控组件</strong>：由 React 来管理表单元素的值，同时表单元素的变化需要实时映射到 React 的 state 中，这个类似于双向数据绑定。不同的表单元素，React 控制方式是不一样的，如 input 用 value 来控制，checkbox 用 checked 来判断是否选中等。</li> <li>**非****受控组件：**非受控组件，表单数据将交由 DOM 节点来处理。React 提供了一个 ref 属性，用来从 DOM 节点中获取表单数据。</li></ul> <p><strong>受控组件：</strong></p> <p>常见的受控组件有文本框、单选框、复选框、下拉列表等。</p> <p><strong>（1）文本框</strong></p> <p>文本框包含类型为 text 、 number 的 input 元素和 textarea 元素。这些被受控的主要原理是通过元素的 value 属性设置表单元素的值，通过表单元素的 onChange 事件监听值的变化，并同步到 React 组件的 state 中。</p> <p>当用户输入框内容改变的时候， onChange 事件会被触发，进而相应的处理函数会把值的变化通过 setState 同步到组件的 state 中，同时由于 state 值的变化，又会重新渲染表单，进而实现对表单元素状态的控制。</p> <p><strong>（2）单选框</strong></p> <p>在 HTML 中， <input type="radio"> 标签可以创建单选框，由标签上的 checked 属性决定是否选中，在React 中也是一样。</p> <p><strong>（3）复选框</strong></p> <p>在 HTML 中， <input type="checkbox"> 标签可以创建复选框，由标签上的 checked 属性决定是否选中，在 React中也是一样。</p> <p><strong>（4）下拉列表</strong></p> <p>在 HTML 中， <select></select> 标签可以创建下拉列表，选中项由 </p><option></option> 上的 selected 属性决定。需要注意的是 React 并不会使用 selected 属性，而是在根 <select></select> 标签上使用 value 属性。<p></p> <p>注意：select 标签可以使用多选，只需在标签中加一个 multiple = {true} ，同时 React 状态变量使用数组，当然 onChange 处理函数也需按数组处理。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">Register</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>handleSubmit <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleSubmit</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
      phone<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
      username<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
      password<span class="token operator">:</span> <span class="token string">''</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token function-variable function">handleChange</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token punctuation">[</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>name<span class="token punctuation">]</span><span class="token operator">:</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  
  <span class="token function">handleSubmit</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> phone<span class="token punctuation">,</span> username<span class="token punctuation">,</span> password<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state
    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">手机号：</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>phone<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> 昵称：</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>username<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> 密码：</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>password<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
    e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> phone<span class="token punctuation">,</span> username<span class="token punctuation">,</span> password<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>form<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">&quot;row&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>span className<span class="token operator">=</span><span class="token string">&quot;input-tip&quot;</span><span class="token operator">&gt;</span>手机号：<span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span> value<span class="token operator">=</span><span class="token punctuation">{</span>phone<span class="token punctuation">}</span> name<span class="token operator">=</span><span class="token string">&quot;phone&quot;</span> onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleChange<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">&quot;row&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>span className<span class="token operator">=</span><span class="token string">&quot;input-tip&quot;</span><span class="token operator">&gt;</span>昵 称：<span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span> value<span class="token operator">=</span><span class="token punctuation">{</span>username<span class="token punctuation">}</span> name<span class="token operator">=</span><span class="token string">&quot;username&quot;</span> onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleChange<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">&quot;row&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>span className<span class="token operator">=</span><span class="token string">&quot;input-tip&quot;</span><span class="token operator">&gt;</span>密 码：<span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;password&quot;</span> value<span class="token operator">=</span><span class="token punctuation">{</span>password<span class="token punctuation">}</span> name<span class="token operator">=</span><span class="token string">&quot;password&quot;</span> onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleChange<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>form<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Register
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br></div></div><p><strong>非受控组件：</strong></p> <p>受控组件保证了表单元素的状态统一由 React 管理，但同时每个表单元素都需要通过 onChange 事件来绑定处理函数，然后将更改同步到 React 组件的 state 中，这个过程还是比较繁琐的。一种可替代方案是使用非受控组件，这时表单数据将交由 DOM 节点来处理。React 提供了一个 ref 属性，用来从 DOM 节点中获取表单数据。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">Login</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>handleSubmit <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleSubmit</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  
  <span class="token function">handleSubmit</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">昵称：</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>refs<span class="token punctuation">.</span>username<span class="token punctuation">.</span>value<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> 密码：</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>refs<span class="token punctuation">.</span>password<span class="token punctuation">.</span>value<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
    e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>form onSubmit<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleSubmit<span class="token punctuation">}</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>row<span class="token punctuation">}</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span> ref<span class="token operator">=</span><span class="token string">&quot;username&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>row<span class="token punctuation">}</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;password&quot;</span> ref<span class="token operator">=</span><span class="token string">&quot;password&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>row<span class="token punctuation">}</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;submit&quot;</span> value<span class="token operator">=</span><span class="token string">&quot;登录&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>form<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Login
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div><p>在填写完表单之后，我们通常会对表单进行校验，以确保表单数据格式准确。最常见的两种检验就是<strong>失去焦点校验</strong>和<strong>提交时校验</strong>。</p> <p><strong>（1）失去焦点校验</strong></p> <p>在失去焦点时加上校验规则，那么就需要监听onBlur事件，然后在onBlur事件中做验证规则处理。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 失去焦点校验</span>
<span class="token keyword">class</span> <span class="token class-name">Register</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  validator <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token function">onBlur</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> rules <span class="token operator">=</span> Rules<span class="token punctuation">[</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>name<span class="token punctuation">]</span>
      <span class="token keyword">const</span> value <span class="token operator">=</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value
      <span class="token comment">/* 失去焦点校验 */</span>
      <span class="token keyword">const</span> verifyResult <span class="token operator">=</span> <span class="token function">verify</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span> rules<span class="token punctuation">)</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>verifyResult<span class="token punctuation">.</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">alert</span><span class="token punctuation">(</span>verifyResult<span class="token punctuation">.</span>message<span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token function">render</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token operator">&lt;</span>input <span class="token punctuation">{</span><span class="token operator">...</span><span class="token keyword">this</span><span class="token punctuation">.</span>validator<span class="token punctuation">}</span> type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span> value<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>username<span class="token punctuation">}</span> name<span class="token operator">=</span><span class="token string">&quot;username&quot;</span> onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleChange<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>input <span class="token punctuation">{</span><span class="token operator">...</span><span class="token keyword">this</span><span class="token punctuation">.</span>validator<span class="token punctuation">}</span> type<span class="token operator">=</span><span class="token string">&quot;password&quot;</span> value<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>password<span class="token punctuation">}</span> name<span class="token operator">=</span><span class="token string">&quot;password&quot;</span> onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleChange<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 校验规则</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> Rules <span class="token operator">=</span> <span class="token punctuation">{</span>
  username<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span> require<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> message<span class="token operator">:</span> <span class="token string">'昵称不能为空'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> min<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> max<span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span> message<span class="token operator">:</span> <span class="token string">'昵称长度不能小于2位，并且不能超过20位'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  password<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span> require<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> message<span class="token operator">:</span> <span class="token string">'密码不能为空'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> regular<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^\w*$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> message<span class="token operator">:</span> <span class="token string">'密码格式不正确，只能输入字母、数字、下划线'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> min<span class="token operator">:</span> <span class="token number">6</span><span class="token punctuation">,</span> max<span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span> message<span class="token operator">:</span> <span class="token string">'密码长度不能小于6位，并且不能超过20位'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>

<span class="token comment">// 处理校验规则</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">verify</span> <span class="token punctuation">(</span><span class="token parameter">value<span class="token punctuation">,</span> rules</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> verifyResult <span class="token operator">=</span> <span class="token punctuation">{</span> error<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> message<span class="token operator">:</span> <span class="token string">'填写必填项'</span> <span class="token punctuation">}</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> rule <span class="token keyword">of</span> rules<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 校验的几种方式：针对 require | regular | min | max 做了处理   </span>
    <span class="token keyword">const</span> errorVerify <span class="token operator">=</span> <span class="token punctuation">(</span>rule<span class="token punctuation">.</span>require <span class="token operator">&amp;&amp;</span> value <span class="token operator">===</span> <span class="token string">''</span><span class="token punctuation">)</span> <span class="token operator">||</span>
                        <span class="token punctuation">(</span>rule<span class="token punctuation">.</span>regular <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>rule<span class="token punctuation">.</span>regular<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">||</span>
                        <span class="token punctuation">(</span>rule<span class="token punctuation">.</span>min <span class="token operator">&amp;&amp;</span> value<span class="token punctuation">.</span>length <span class="token operator">&lt;</span> rule<span class="token punctuation">.</span>min<span class="token punctuation">)</span> <span class="token operator">||</span>
                        <span class="token punctuation">(</span>rule<span class="token punctuation">.</span>max <span class="token operator">&amp;&amp;</span> value<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> rule<span class="token punctuation">.</span>max<span class="token punctuation">)</span>
    <span class="token comment">// 校验错误，则返回error及message，并跳出循环，不继续执行循环</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>errorVerify<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      verifyResult <span class="token operator">=</span> <span class="token punctuation">{</span> error<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> message<span class="token operator">:</span> rule<span class="token punctuation">.</span>message <span class="token punctuation">}</span>
      <span class="token keyword">break</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 校验成功，将 error 设置为 false</span>
    verifyResult <span class="token operator">=</span> <span class="token punctuation">{</span> error<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> message<span class="token operator">:</span> <span class="token string">''</span> <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> verifyResult
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br></div></div><p>这里我们定义了 <code>validator</code> 对象，对象中有一个 <code>onBlur()</code> 函数， <code>onBlur()</code> 函数用来处理失去焦点的验证。在 <code>input</code> 中，加入了 <code>{...this.validator}</code> ，这样写是为了以后的扩展性（比如可以在 <code>validator</code> 中加入其他的处理函数），当然也等同于 <code>onBlur={onBlur}</code> 。</p> <p>在表单校验的主逻辑中，只获取了校验结果和提示内容，至于如何验证都交给了 <code>verify</code> 函数去处理，这样我们主逻辑代码就很清晰了。这里我们将校验规则与校验规则的处理放在了单独的文件中，这样主逻辑代码看起来更加简洁，在主逻辑代码中，我们只管使用相应的校验规则，而不用关心校验规则是如何进行的。</p> <p><strong>（2）提交时校验</strong></p> <p>如果只对单个输入框失去焦点时进行校验，并不能保证提交时都是正确的数据，所以还需要在点击提交时，再次校验规则。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 提交时校验</span>
<span class="token keyword">class</span> <span class="token class-name">Register</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  <span class="token function">handleSubmit</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment">/* 提交校验 */</span>
    <span class="token keyword">const</span> verifyResult <span class="token operator">=</span> <span class="token function">submitVerify</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>verifyResult<span class="token punctuation">.</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">alert</span><span class="token punctuation">(</span>verifyResult<span class="token punctuation">.</span>message<span class="token punctuation">)</span>
      <span class="token keyword">return</span>
    <span class="token punctuation">}</span>

    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">昵称：</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>username<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> 密码：</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>password<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>

<span class="token comment">// 校验规则</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> Rules <span class="token operator">=</span> <span class="token punctuation">{</span>
  username<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span> require<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> message<span class="token operator">:</span> <span class="token string">'昵称不能为空'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> min<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> max<span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span> message<span class="token operator">:</span> <span class="token string">'昵称长度不能小于2位，并且不能超过20位'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  password<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span> require<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> message<span class="token operator">:</span> <span class="token string">'密码不能为空'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> regular<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^\w*$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> message<span class="token operator">:</span> <span class="token string">'密码格式不正确，只能输入字母、数字、下划线'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> min<span class="token operator">:</span> <span class="token number">6</span><span class="token punctuation">,</span> max<span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span> message<span class="token operator">:</span> <span class="token string">'密码长度不能小于6位，并且不能超过20位'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>

<span class="token comment">// 处理校验规则</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">submitVerify</span> <span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> verifyResult <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token comment">/* 从Rules中取key值 */</span>
  <span class="token keyword">const</span> keyArray <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>Rules<span class="token punctuation">)</span>
  <span class="token comment">/* 这里通过循环对 Rules 中的每个值进行了遍历，
   * 并在每次遍历的过程中，都使用 verify() 函数进行验证处理 */</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> key <span class="token keyword">of</span> keyArray<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> rules <span class="token operator">=</span> Rules<span class="token punctuation">[</span>key<span class="token punctuation">]</span>
    <span class="token comment">/* 单次处理和我们在失去焦点时处理方式一样 */</span>
    verifyResult <span class="token operator">=</span> <span class="token function">verify</span><span class="token punctuation">(</span>state<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">,</span> rules<span class="token punctuation">)</span>
    <span class="token comment">/* 如果发现填写的有错误项，直接退出循环 */</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>verifyResult<span class="token punctuation">.</span>error<span class="token punctuation">)</span> <span class="token keyword">break</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> verifyResult
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br></div></div><h2 id="六、jsx是如何变成dom的"><a href="#六、jsx是如何变成dom的" class="header-anchor">#</a> 六、JSX是如何变成DOM的？</h2> <p>React官网中对JSX的定义：</p> <p>JSX 是 JavaScript 的一种语法扩展，它和模板语言很接近，但是它充分具备 JavaScript 的能力。</p> <p>那关键问题就是<strong>JSX是如何在JavaScript中生效的</strong>，官方的解释：</p> <p>JSX 会被编译为 React.createElement()， React.createElement() 将返回一个叫作“React Element”的 JS 对象。</p> <p>实际上，JSX仅仅只是 <strong>React.createElement(component, props, ...children)</strong> 函数的语法糖。所有的jsx最终都会被转换成React.createElement的函数调用。这也就意味着，我们写的JSX其实写的就是 React.createElement，虽然它看起来很像HTML。这也印证了JSX充分具备JavaScript的能力。</p> <p><strong>React内部处理<strong><strong>createElement</strong></strong>的源码如下：</strong></p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">createElement</span><span class="token punctuation">(</span><span class="token parameter">type<span class="token punctuation">,</span> config<span class="token punctuation">,</span> children</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// propName 变量用于储存后面需要用到的元素属性</span>
  <span class="token keyword">let</span> propName<span class="token punctuation">;</span> 
  <span class="token comment">// props 变量用于储存元素属性的键值对集合</span>
  <span class="token keyword">const</span> props <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span> 
  <span class="token comment">// key、ref、self、source 均为 React 元素的属性</span>
  <span class="token keyword">let</span> key <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> ref <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> 
  <span class="token keyword">let</span> self <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> 
  <span class="token keyword">let</span> source <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> 
  <span class="token comment">// config 对象中存储的是元素的属性</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>config <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
    <span class="token comment">// 依次对 ref、key、self 和 source 属性赋值</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">hasValidRef</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      ref <span class="token operator">=</span> config<span class="token punctuation">.</span>ref<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 此处将 key 值字符串化</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">hasValidKey</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      key <span class="token operator">=</span> <span class="token string">''</span> <span class="token operator">+</span> config<span class="token punctuation">.</span>key<span class="token punctuation">;</span> 
    <span class="token punctuation">}</span>
    self <span class="token operator">=</span> config<span class="token punctuation">.</span>__self <span class="token operator">===</span> <span class="token keyword">undefined</span> <span class="token operator">?</span> <span class="token keyword">null</span> <span class="token operator">:</span> config<span class="token punctuation">.</span>__self<span class="token punctuation">;</span>
    source <span class="token operator">=</span> config<span class="token punctuation">.</span>__source <span class="token operator">===</span> <span class="token keyword">undefined</span> <span class="token operator">?</span> <span class="token keyword">null</span> <span class="token operator">:</span> config<span class="token punctuation">.</span>__source<span class="token punctuation">;</span>
    <span class="token comment">// 把 config 里面的属性都一个一个挪到 props 这个之前声明好的对象里面</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span>propName <span class="token keyword">in</span> config<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>
        <span class="token comment">// 筛选出可以提进 props 对象里的属性</span>
        <span class="token function">hasOwnProperty</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>config<span class="token punctuation">,</span> propName<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span>  
        <span class="token operator">!</span><span class="token constant">RESERVED_PROPS</span><span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span>propName<span class="token punctuation">)</span> 
      <span class="token punctuation">)</span> <span class="token punctuation">{</span>
        props<span class="token punctuation">[</span>propName<span class="token punctuation">]</span> <span class="token operator">=</span> config<span class="token punctuation">[</span>propName<span class="token punctuation">]</span><span class="token punctuation">;</span> 
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// childrenLength 指的是当前元素的子元素的个数，减去的 2 是 type 和 config 两个参数占用的长度</span>
  <span class="token keyword">const</span> childrenLength <span class="token operator">=</span> arguments<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">2</span><span class="token punctuation">;</span> 
  <span class="token comment">// 如果抛去type和config，就只剩下一个参数，一般意味着文本节点出现了</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>childrenLength <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
    <span class="token comment">// 直接把这个参数的值赋给props.children</span>
    props<span class="token punctuation">.</span>children <span class="token operator">=</span> children<span class="token punctuation">;</span> 
    <span class="token comment">// 处理嵌套多个子元素的情况</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>childrenLength <span class="token operator">&gt;</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
    <span class="token comment">// 声明一个子元素数组</span>
    <span class="token keyword">const</span> childArray <span class="token operator">=</span> <span class="token function">Array</span><span class="token punctuation">(</span>childrenLength<span class="token punctuation">)</span><span class="token punctuation">;</span> 
    <span class="token comment">// 把子元素推进数组里</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> childrenLength<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
      childArray<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> arguments<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 最后把这个数组赋值给props.children</span>
    props<span class="token punctuation">.</span>children <span class="token operator">=</span> childArray<span class="token punctuation">;</span> 
  <span class="token punctuation">}</span> 
  <span class="token comment">// 处理 defaultProps</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>type <span class="token operator">&amp;&amp;</span> type<span class="token punctuation">.</span>defaultProps<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> defaultProps <span class="token operator">=</span> type<span class="token punctuation">.</span>defaultProps<span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span>propName <span class="token keyword">in</span> defaultProps<span class="token punctuation">)</span> <span class="token punctuation">{</span> 
      <span class="token keyword">if</span> <span class="token punctuation">(</span>props<span class="token punctuation">[</span>propName<span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        props<span class="token punctuation">[</span>propName<span class="token punctuation">]</span> <span class="token operator">=</span> defaultProps<span class="token punctuation">[</span>propName<span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 最后返回一个调用ReactElement执行方法，并传入刚才处理过的参数</span>
  <span class="token keyword">return</span> <span class="token function">ReactElement</span><span class="token punctuation">(</span>
    type<span class="token punctuation">,</span>
    key<span class="token punctuation">,</span>
    ref<span class="token punctuation">,</span>
    self<span class="token punctuation">,</span>
    source<span class="token punctuation">,</span>
    ReactCurrentOwner<span class="token punctuation">.</span>current<span class="token punctuation">,</span>
    props<span class="token punctuation">,</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br></div></div><p><strong>入参：createElement需要传递三个参数：</strong></p> <p>（1）参数一：type，表示当前ReactElement的类型；</p> <ul><li>如果是标签元素，那么就使用字符串表示 “div”；</li> <li>如果是组件元素，那么就直接使用组件的名称；</li></ul> <p>（2）参数二：config，以对象形式传入，组件所有的属性都会以键值对的形式存储在 config 对象中；</p> <p>（3）参数三：children，存放在标签中的内容，以children数组的方式进行存储；</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// jsx -&gt; babel -&gt; React.createElement()</span>
<span class="token keyword">const</span> message1 <span class="token operator">=</span> <span class="token operator">&lt;</span>h2<span class="token operator">&gt;</span>Hello React<span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">&gt;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> message2 <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;h2&quot;</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token string">&quot;Hello React&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>createElement的处理流程：</p> <p><img src="/assets/img/1606615633463-b90e82ab-5808-4ff5-a380-1963e5bcf70d.1094c76a.png" alt="img"></p> <p>简单来说，React.createElement就是一个“转换器”，将用户输入的参数，进行一定的格式化，最终通过调用ReactElement来实现元素的创建。</p> <p>**出参：**createElement 执行到最后会 return 一个针对 ReactElement 的调用。下面是ReactElement的源码：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">ReactElement</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">type<span class="token punctuation">,</span> key<span class="token punctuation">,</span> ref<span class="token punctuation">,</span> self<span class="token punctuation">,</span> source<span class="token punctuation">,</span> owner<span class="token punctuation">,</span> props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> element <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token comment">// REACT_ELEMENT_TYPE是一个常量，用来标识该对象是一个ReactElement</span>
    $$<span class="token keyword">typeof</span><span class="token operator">:</span> <span class="token constant">REACT_ELEMENT_TYPE</span><span class="token punctuation">,</span>
    <span class="token comment">// 内置属性赋值</span>
    type<span class="token operator">:</span> type<span class="token punctuation">,</span>
    key<span class="token operator">:</span> key<span class="token punctuation">,</span>
    ref<span class="token operator">:</span> ref<span class="token punctuation">,</span>
    props<span class="token operator">:</span> props<span class="token punctuation">,</span>
    <span class="token comment">// 记录创造该元素的组件</span>
    _owner<span class="token operator">:</span> owner<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token comment">// </span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>__DEV__<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//__DEV__ 环境下的处理</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> element<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>根据上面的源码可以看出，ReactElement实际上就做了一件事，将传入的参数进行组装，将它们组装进element对象中，并将它返回给了React.createElement，最终 React.createElement 又把它交回到了开发者手中。</p> <p>整体的流程图如下：</p> <p><img src="/assets/img/1606616745052-f1dececb-9d41-4022-bb0a-cece68c72494.52d84a82.png" alt="img"></p> <p>通过 React.createElement 最终创建出来一个ReactElement对象。</p> <p>React利用ReactElement对象组成了一个JavaScript的对象树，对象树就是虚拟DOM（Virtual DOM）。下面是一个ReactElement对象的示例代码：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// jsx -&gt; createElement函数 -&gt; ReactElement(对象树) -&gt; ReactDOM.render -&gt; 真实DOM</span>
        <span class="token comment">// jsx -&gt; createElement函数 -&gt; ReactElement(对象树) -&gt; ReactDOM.render -&gt; 原生的控件(UIButton/Button)</span>
        <span class="token keyword">var</span> elementObj <span class="token operator">=</span> <span class="token punctuation">(</span>
          <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">&quot;header&quot;</span><span class="token operator">&gt;</span>
              <span class="token operator">&lt;</span>h1 title<span class="token operator">=</span><span class="token string">&quot;标题&quot;</span><span class="token operator">&gt;</span>标题<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">&quot;content&quot;</span><span class="token operator">&gt;</span>
              <span class="token operator">&lt;</span>h2<span class="token operator">&gt;</span>内容<span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">&gt;</span>
              <span class="token operator">&lt;</span>button<span class="token operator">&gt;</span>按钮<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
              <span class="token operator">&lt;</span>button<span class="token operator">&gt;</span><span class="token operator">+</span><span class="token number">1</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
              <span class="token operator">&lt;</span>a href<span class="token operator">=</span><span class="token string">&quot;http://www.baidu.com&quot;</span><span class="token operator">&gt;</span>百度一下<span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">&quot;footer&quot;</span><span class="token operator">&gt;</span>
              <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>底部<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token punctuation">)</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>elementObj<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> elementObj<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><p><img src="/assets/img/1605540630415-5ee4ffa5-9aa0-4cbe-8cd8-92b104ade275.362aaf9e.png" alt="img"></p> <p>上面就是生成的对象树，也就是虚拟DOM，那虚拟DOM是如何转化为真是的DOM结构的呢?它靠的就是render函数。在每一个 React 项目的入口文件中，都少不了对 React.render 函数的调用。</p> <p><strong>ReactDOM.render 方法的入参规则：</strong></p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code> ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>
 <span class="token comment">// 需要渲染的元素（ReactElement）</span>
     element<span class="token punctuation">,</span> 
 <span class="token comment">// 元素挂载的目标容器（一个真实DOM）</span>
     container<span class="token punctuation">,</span>
 <span class="token comment">// 回调函数，可选参数，可以用来处理渲染结束后的逻辑</span>
     <span class="token punctuation">[</span>callback<span class="token punctuation">]</span>
 <span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>ReactDOM.render 方法可以接收 3 个参数，其中<strong>第二个参数就是一个真实的 DOM 节点</strong>，<strong>这个真实的 DOM 节点充当“容器”的角色</strong>，React 元素最终会被渲染到这个“容器”里面去。上面所说的 App 组件，它对应的 render 调用是这样的：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>App <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;app&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>需要注意的是，这个真实的DOM一定是确实存在的，比如在 App 组件对应的 index.html 中，已经提前预置 了 id 为 root 的根节点：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token operator">&lt;</span>body<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">&quot;root&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>那为什么要操作虚拟DOM，而不是操作真实的DOM呢？原因如下：</p> <ul><li>很难跟踪状态发生的改变：原有的开发模式，我们很难跟踪到状态发生的改变，不方便针对我们应用程序进行调试；</li> <li>操作真实DOM性能较低：传统的开发模式会进行频繁的DOM操作，而这一的做法性能非常的低；</li></ul> <p><strong>DOM操作性能非常低：</strong></p> <ul><li>首先，document.createElement本身创建出来的就是一个非常复杂的对象；</li> <li>其次，DOM操作会引起浏览器的回流和重绘，所以在开发中应该避免频繁的DOM操作；</li></ul> <p>虚拟DOM可以帮助我们从命令式编程转到了声明式编程的模式。</p> <p>**下面是React官方的说法：**Virtual DOM 是一种编程理念。</p> <ul><li>在这个理念中，UI以一种理想化或者说虚拟化的方式保存在内存中，并且它是一个相对简单的JavaScript对象</li> <li>我们可以通过ReactDOM.render让 虚拟DOM 和 真实DOM同步起来，这个过程中叫做协调（Reconciliation）；</li></ul> <p>这种编程的方式赋予了React声明式的API：</p> <ul><li><p>只需要告诉React希望让UI是什么状态；</p></li> <li><p>React来确保DOM和这些状态是匹配的；</p></li> <li><p>不需要直接进行DOM操作，只可以从手动更改DOM、属性操作、事件处理中解放出来；</p></li></ul> <h2 id="七、案例练习"><a href="#七、案例练习" class="header-anchor">#</a> 七、案例练习</h2> <p>下面就来做一个简单的案例，其要求如下：</p> <ul><li><p>在界面上以表格的形式，显示一些书籍的数据</p></li> <li><p>在底部显示书籍的总价格</p></li> <li><p>点击+或者点击-可以增加或减少书籍数量（如果为1，那么不能继续－）</p></li> <li><p>点击移除按钮，可以将书籍移除（当所有书籍移除完毕之后，显示：购物车为空~）</p></li></ul> <p>页面效果如下:</p> <p><img src="/assets/img/1605541846406-fb10cd69-5806-4f49-8cf1-a33d3aef439c.cc5addf8.png" alt="img"></p> <p><strong>代码实现：</strong></p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code> <span class="token operator">&lt;</span>style<span class="token operator">&gt;</span>
    table <span class="token punctuation">{</span>
      border<span class="token operator">:</span> <span class="token number">1</span>px solid #eee<span class="token punctuation">;</span>
      border<span class="token operator">-</span>collapse<span class="token operator">:</span> collapse<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    th<span class="token punctuation">,</span> td <span class="token punctuation">{</span>
      border<span class="token operator">:</span> <span class="token number">1</span>px solid #eee<span class="token punctuation">;</span>
      padding<span class="token operator">:</span> <span class="token number">10</span>px <span class="token number">16</span>px<span class="token punctuation">;</span>
      text<span class="token operator">-</span>align<span class="token operator">:</span> center<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    th <span class="token punctuation">{</span>
      background<span class="token operator">-</span>color<span class="token operator">:</span> #ccc<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token punctuation">.</span>count <span class="token punctuation">{</span>
      margin<span class="token operator">:</span> <span class="token number">0</span> <span class="token number">5</span>px<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">&gt;</span>
<span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
      <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
          books<span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token punctuation">{</span>
              id<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
              name<span class="token operator">:</span> <span class="token string">'《算法导论》'</span><span class="token punctuation">,</span>
              date<span class="token operator">:</span> <span class="token string">'2006-9'</span><span class="token punctuation">,</span>
              price<span class="token operator">:</span> <span class="token number">85.00</span><span class="token punctuation">,</span>
              count<span class="token operator">:</span> <span class="token number">2</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
              id<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
              name<span class="token operator">:</span> <span class="token string">'《UNIX编程艺术》'</span><span class="token punctuation">,</span>
              date<span class="token operator">:</span> <span class="token string">'2006-2'</span><span class="token punctuation">,</span>
              price<span class="token operator">:</span> <span class="token number">59.00</span><span class="token punctuation">,</span>
              count<span class="token operator">:</span> <span class="token number">1</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
              id<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
              name<span class="token operator">:</span> <span class="token string">'《编程珠玑》'</span><span class="token punctuation">,</span>
              date<span class="token operator">:</span> <span class="token string">'2008-10'</span><span class="token punctuation">,</span>
              price<span class="token operator">:</span> <span class="token number">39.00</span><span class="token punctuation">,</span>
              count<span class="token operator">:</span> <span class="token number">1</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
              id<span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span>
              name<span class="token operator">:</span> <span class="token string">'《代码大全》'</span><span class="token punctuation">,</span>
              date<span class="token operator">:</span> <span class="token string">'2006-3'</span><span class="token punctuation">,</span>
              price<span class="token operator">:</span> <span class="token number">128.00</span><span class="token punctuation">,</span>
              count<span class="token operator">:</span> <span class="token number">1</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>

      <span class="token function">renderBooks</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span>  <span class="token punctuation">(</span>
          <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>table<span class="token operator">&gt;</span>
              <span class="token operator">&lt;</span>thead<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>tr<span class="token operator">&gt;</span>
                  <span class="token operator">&lt;</span>th<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>th<span class="token operator">&gt;</span>
                  <span class="token operator">&lt;</span>th<span class="token operator">&gt;</span>书籍名称<span class="token operator">&lt;</span><span class="token operator">/</span>th<span class="token operator">&gt;</span>
                  <span class="token operator">&lt;</span>th<span class="token operator">&gt;</span>出版日期<span class="token operator">&lt;</span><span class="token operator">/</span>th<span class="token operator">&gt;</span>
                  <span class="token operator">&lt;</span>th<span class="token operator">&gt;</span>价格<span class="token operator">&lt;</span><span class="token operator">/</span>th<span class="token operator">&gt;</span>
                  <span class="token operator">&lt;</span>th<span class="token operator">&gt;</span>购买数量<span class="token operator">&lt;</span><span class="token operator">/</span>th<span class="token operator">&gt;</span>
                  <span class="token operator">&lt;</span>th<span class="token operator">&gt;</span>操作<span class="token operator">&lt;</span><span class="token operator">/</span>th<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>tr<span class="token operator">&gt;</span>
              <span class="token operator">&lt;</span><span class="token operator">/</span>thead<span class="token operator">&gt;</span>
              <span class="token operator">&lt;</span>tbody<span class="token operator">&gt;</span>
                <span class="token punctuation">{</span>
                  <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>books<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                    <span class="token keyword">return</span> <span class="token punctuation">(</span>
                      <span class="token operator">&lt;</span>tr<span class="token operator">&gt;</span>
                        <span class="token operator">&lt;</span>td<span class="token operator">&gt;</span><span class="token punctuation">{</span>index<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>td<span class="token operator">&gt;</span>
                        <span class="token operator">&lt;</span>td<span class="token operator">&gt;</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>td<span class="token operator">&gt;</span>
                        <span class="token operator">&lt;</span>td<span class="token operator">&gt;</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>date<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>td<span class="token operator">&gt;</span>
                        <span class="token operator">&lt;</span>td<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">formatPrice</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>price<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>td<span class="token operator">&gt;</span>
                        <span class="token operator">&lt;</span>td<span class="token operator">&gt;</span>
                          <span class="token operator">&lt;</span>button disabled<span class="token operator">=</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>count <span class="token operator">&lt;=</span> <span class="token number">1</span><span class="token punctuation">}</span> onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token parameter">e</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">changeBookCount</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">-</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
                          <span class="token operator">&lt;</span>span className<span class="token operator">=</span><span class="token string">&quot;count&quot;</span><span class="token operator">&gt;</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>count<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
                          <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token parameter">e</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">changeBookCount</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">+</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
                        <span class="token operator">&lt;</span><span class="token operator">/</span>td<span class="token operator">&gt;</span>
                        <span class="token operator">&lt;</span>td<span class="token operator">&gt;</span><span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token parameter">e</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">removeBook</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>移除<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>td<span class="token operator">&gt;</span>
                      <span class="token operator">&lt;</span><span class="token operator">/</span>tr<span class="token operator">&gt;</span>
                    <span class="token punctuation">)</span>
                  <span class="token punctuation">}</span><span class="token punctuation">)</span>
                <span class="token punctuation">}</span>
              <span class="token operator">&lt;</span><span class="token operator">/</span>tbody<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>table<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>h2<span class="token operator">&gt;</span>总价格<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getTotalPrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
      <span class="token comment">// 购物车为空</span>
      <span class="token function">renderEmptyTip</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token operator">&lt;</span>h2<span class="token operator">&gt;</span>购物车为空<span class="token operator">~</span><span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">&gt;</span>
      <span class="token punctuation">}</span>
      <span class="token comment">// 条件渲染</span>
      <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>books<span class="token punctuation">.</span>length <span class="token operator">?</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">renderBooks</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">renderEmptyTip</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token comment">// 修改书籍数量</span>
      <span class="token function">changeBookCount</span><span class="token punctuation">(</span><span class="token parameter">index<span class="token punctuation">,</span> count</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> newBooks <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>books<span class="token punctuation">]</span><span class="token punctuation">;</span>
        newBooks<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">.</span>count <span class="token operator">+=</span> count<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
          books<span class="token operator">:</span> newBooks
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
      <span class="token comment">// 移除书籍</span>
      <span class="token function">removeBook</span><span class="token punctuation">(</span><span class="token parameter">index</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
          books<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>books<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item<span class="token punctuation">,</span> indey</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> index <span class="token operator">!=</span> indey<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
      <span class="token comment">// 计算书籍总价格</span>
      <span class="token function">getTotalPrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> totalPrice <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>books<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">preValue<span class="token punctuation">,</span> item</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> preValue <span class="token operator">+</span> item<span class="token punctuation">.</span>count <span class="token operator">*</span> item<span class="token punctuation">.</span>price<span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">formatPrice</span><span class="token punctuation">(</span>totalPrice<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token comment">// 处理书籍价格格式</span>
      <span class="token function">formatPrice</span><span class="token punctuation">(</span><span class="token parameter">price</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> price <span class="token operator">!==</span> <span class="token string">&quot;number&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          price <span class="token operator">=</span> <span class="token function">Number</span><span class="token punctuation">(</span><span class="token string">&quot;aaa&quot;</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token string">&quot;¥&quot;</span> <span class="token operator">+</span> price<span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>App<span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;app&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br></div></div><p>通常我们会将渲染相关的函数放在render函数的上方，将功能性的函数放在render函数的下方。</p> <p>需要注意， React中设计原则中有一条: state中的数据的不可变性，所以我们不能直接操作数组中元素，需要对其进行拷贝在进行操作。</p></div></section> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev"><a href="/docs/advanced/vue/mvc.html" class="prev">
            MVC、MVP、MVVM
          </a></span> <span class="next"><a href="/docs/advanced/react/practice.html">
            React组件实践
          </a></span></p></div> <div class="comments-wrapper"><!----></div> <ul class="side-bar sub-sidebar-wrapper" style="width:0;" data-v-70334359></ul></main> <!----></div></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div><div class="kanbanniang" data-v-5775ee02><div class="banniang-container" style="display:;" data-v-5775ee02><div class="messageBox" style="right:68px;bottom:290px;display:none;" data-v-5775ee02>
      欢迎欢迎
    </div> <div class="operation" style="right:90px;bottom:40px;display:;" data-v-5775ee02><i class="kbnfont kbn-ban-home ban-home" data-v-5775ee02></i> <i class="kbnfont kbn-ban-message message" data-v-5775ee02></i> <i class="kbnfont kbn-ban-close close" data-v-5775ee02></i> <a target="_blank" href="https://vuepress-theme-reco.recoluan.com/views/plugins/kanbanniang.html" data-v-5775ee02><i class="kbnfont kbn-ban-info info" data-v-5775ee02></i></a> <i class="kbnfont kbn-ban-theme skin" style="display:;" data-v-5775ee02></i></div> <canvas id="banniang" width="260px" height="320" class="live2d" style="right:90px;bottom:-20px;opacity:0.9;" data-v-5775ee02></canvas></div> <div class="showBanNiang" style="display:none;" data-v-5775ee02>
    看板娘
  </div></div><!----><!----><canvas id="vuepress-canvas-cursor"></canvas><!----><div class="RibbonAnimation"></div></div></div>
    <script src="/assets/js/app.50b0bd0e.js" defer></script><script src="/assets/js/6.e87d9ed0.js" defer></script><script src="/assets/js/1.ec164ee9.js" defer></script><script src="/assets/js/23.edc63186.js" defer></script>
  </body>
</html>
