---
title: 正则表达式
date: 2019-05-24
tags:
 - JavaScript
categories:
 - JavaScript
---

## 1. 什么是正则表达式

正则表达式是使用单个字符串来描述、匹配一系列符合某个句法规则的字符串搜索模式。

正则表达式可用于执行所有类型的**文本搜索**和**文本替换**操作。

## 2. 创建正则表达式

创建正则表达式有两种方式：

1. 直接创建,正则表达式直接放在`/ /`之前

```javascript
var re = /a+b/;
```

1. 利用构造函数动态创建，

```javascript
var re = new RegExp("a+b");
```

## 3. 匹配模式

正则表达式的匹配模式支持以下三个标志：

- `g`：表示全局模式，即运用于所有字符串

```javascript
//匹配字符串中所有的aaa
var pattern1=/aaa/g
```

- `i`：表示不区分大小写，即匹配时忽略字符串的大小写

```javascript
//匹配字符串中第一个aaa，不区分大小写
var pattern1=/aaa/i
```

- `m`：表示多行模式，在多行文本中，匹配完第一行继续匹配下一行

注：三种模式可以同时使用

## 4. 基本字符

| 字符  | 描述                                                         | 举例                                          |
| ----- | ------------------------------------------------------------ | --------------------------------------------- |
| `.`   | 匹配除了换行符之外的任何单个字符                             |                                               |
| `\`   | 将下一个字符标记为特殊字符、或原义字符、或向后引用、或八进制转义符。 | `\n` 表示换行符、`\d` 匹配 [0-9] 的数字       |
| `|`   | 逻辑或操作符                                                 | 匹配 x 或者 y：`x|y`                          |
| `[]`  | 字符集合。匹配所包含的任意一个字符                           | 匹配xyz中任意一个字符：`[xyz]`                |
| `[^]` | 取非，匹配未包含的任意字符。                                 | 匹配不包含xyz的任意字符`[^xyz]`               |
| `-`   | 字符范围。匹配指定范围内的任意字符                           | 匹配 a 到 z 范围内的任意小写字母字符：`[a-z]` |

## 5. 数量字符

| 字符    | 描述                                                         |
| ------- | ------------------------------------------------------------ |
| `{m,n}` | 匹配前面一个字符至少 m 次至多 n 次重复，`{m}`表示匹配 m 次，`{m,}`表示至少 m 次 |
| `+`     | 匹配前面一个表达式一次或者多次，相当于 `{1,}`                |
| `*`     | 匹配前面一个表达式0次或者多次，相当于 `{0,}`                 |
| `?`     | 单独使用匹配前面一个表达式零次或者一次，相当于 {0,1}，如果跟在量词*,+,?,{}后面的时候将会使量词变为非贪婪模式（尽量匹配少的字符），默认是使用贪婪模式 |

## 6. 位置字符

| 字符     | 描述                                         |
| -------- | -------------------------------------------- |
| `\b`     | 匹配一个单词边界，也就是指单词和空格间的位置 |
| `\B`     | 匹配非单词边界                               |
| `^`      | 匹配输入字符串的开始位置。                   |
| `$`      | 匹配输入字符串的结束位置。                   |
| `(?=p)`  | 匹配 p 前面的位置                            |
| `(?!=p)` | 匹配不是 p 前面的位置                        |

## 7. 特殊字符

| 字符 | 描述                                                         |
| ---- | ------------------------------------------------------------ |
| `\d` | 相当一：`[0-9]`，表示一位数字                                |
| `\D` | 相当于：`[0-9]`，表示一位数字                                |
| `\s` | 相当于：`[\t\v\n\r\f]`，表示空白符，包括空格，水平制表符`\t`，垂直制表符`\v`，换行符`\n`，回车符`\r`，换页符`\f` |
| `\S` | 相当于：`[^\t\v\n\r\f]`，表示非空白符                        |
| `\w` | 相当于：`[0-9a-zA-Z]`，表示数字大小写字母和下划线            |
| `\W` | 相当于：`[^0-9a-zA-Z]`                                       |

## 8. 正则方法

1. test()方法
   **规则**：搜索字符串指定的值，从而去匹配字符串，返回布尔值。
   **实例**：

```javascript
var str = "123abc";
var re = /\D/; // 匹配非数字
if(re.test(str)) {
  console.log("不全是数字！");
} else {
  console.log("全是数字！");
}
//结果：不全是数字
```

1. search() 方法
   **规则**：匹配字符串，如果匹配成功，就返回匹配成功的位置，如果匹配失败就返回 -1
   **实例**：

```javascript
var str = "abcdef";
var re1 = /d/i; 
console.log(str.search(re1));
//结果：3
```

1. match()方法
   **规则**：匹配字符串，如果匹配成功，返回匹配成功的数组，如果匹配不成，就返回 `null`
   **实例**：

```javascript
var str = "123fadf321dfadf4fadf1"; 
var re = /\d+/g;
console.log(str.match(re));
//结果：["123", "321", "4", "1"]
```

1. replace()方法
   **规则**：匹配字符串，匹配成功的字符串去替换成新的字符串。函数的第一个参数，是匹配成功的字符；第二个参数：可以是字符串，也可以是一个回调函数。
   **实例**：

```javascript
var str = 'aaa';
var re = /a+/g;
str = str.replace(re, "b");
console.log(str); 
//结果：b
```

## 9. RegExp实例属性

这些属性可以获知一个正则表达式的各方面的信息，但是用处不大。

| 属性       | 描述                                                         |
| ---------- | ------------------------------------------------------------ |
| global     | 布尔值，表示是否设置了g标志                                  |
| ignoreCase | 布尔值，表示是否设置了i标志                                  |
| lastIndex  | 整数，表示开始搜索下一个匹配项的字符位置，从0算起            |
| multiline  | 布尔值，表示是否设置了m标志                                  |
| source     | 正则表达式的字符串表示，按照字面量形式而非传入构造函数重大的字符串模式匹配 |

## 10. RegExp实例方法

1. exec()方法
   `exec()` 方法用于检索字符串中的正则表达式的匹配。如果字符串中有匹配的值返回该匹配值，否则返回 null。

```javascript
var str="Hello world!";
//查找"Hello"
var patt=/Hello/g;
var result=patt.exec(str);
document.write("返回值: " +  result); 
//返回值：Hello
```

1. test()方法
   `test()` 方法用于检测一个字符串是否匹配某个模式。如果字符串中有匹配的值返回 true ，否则返回 false。

```javascript
var str="Hello world!";
//查找"Hello"
var patt=/Hello/g;
var result=patt.test(str);
document.write("返回值: " +  result); 
返回值：true
```

## 11. 常见正则表达式

- 检验手机号码格式：

```javascript
var reg=/^1\d{10}$/g;
```

- 检验邮箱地址是否合法

```javascript
var reg=/^\w+@[a-zA-Z0-9]{2,10}(?:\.[a-z]{2,4}){1,3}$/;
```

- 检验是否为中文

```javascript
var reg=/^[\u4E00-\u9FA5]{2,4}$/;  
```

- 检验身份证格式

```javascript
var reg = /^[1-9]\d{5}(18|19|([23]\d))\d{2}((0[1-9])|(10|11|12))(([0-2][1-9])|10|20|30|31)\d{3}[0-9Xx]$/
```

- 检验URL地址

```javascript
var urlP= /^((https?|ftp|file):\/\
```